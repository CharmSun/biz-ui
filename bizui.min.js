/**
 * BizUI Framework
 * @version v1.0.2
 * @copyright 2015 Sogou, Inc.
 * @link https://github.com/bizdevfe/biz-ui
 */

(function(e,t){typeof define=="function"&&define.amd?define([],t):e.bizui=t()})(this,function(){var e,t,n;return function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("loader/almond",function(){}),n("ui/Button",["require"],function(e){function t(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}if(!s(e))return;this.main=e,this.$main=$(this.main),this.options=$.extend({},t||{}),this.init(this.options)}function s(e){return e.nodeType===1&&e.tagName.toLowerCase()==="button"}var n="biz-button",r="biz-button-disable",i="biz-button-";t.prototype={init:function(e){this.$main.addClass(n),e.theme&&this.$main.addClass(i+e.theme),e.label&&this.$main.html(e.label),e.disabled&&this.disable()},enable:function(){this.main.disabled=!1,this.$main.removeClass(r)},disable:function(){this.main.disabled=!0,this.$main.addClass(r)},destroy:function(){this.$main.removeClass(n+" "+r),this.options.theme&&this.$main.removeClass(i+this.options.theme)}};var o="bizButton";return $.extend($.fn,{bizButton:function(e,n){var r;switch(e){case"enable":this.each(function(){r=$(this).data(o),r&&r.enable()});break;case"disable":this.each(function(){r=$(this).data(o),r&&r.disable()});break;case"destroy":this.each(function(){r=$(this).data(o),r&&(r.destroy(),$(this).data(o,null))});break;default:this.each(function(){!$(this).data(o)&&s(this)&&$(this).data(o,new t(this,e))})}return this}}),t}),n("ui/Input",["require"],function(e){function t(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}if(!o(e))return;this.main=e,this.$main=$(this.main),this.options=$.extend({},t||{}),this.init(this.options)}function o(e){return e.nodeType===1&&e.tagName.toLowerCase()==="input"&&e.getAttribute("type").toLowerCase()==="text"}var n="biz-input",r="biz-input-disable",i="biz-input-hover",s="biz-input-focus";t.prototype={init:function(e){this.$main.addClass(n),e.disabled&&this.disable();if(e.onEnter){var t=this;this.$main.on("keydown.bizInput",function(n){n.keyCode===13&&e.onEnter.call(t,n)})}this.$main.on("mouseover.bizInput",function(e){$(this).addClass(i)}).on("mouseout.bizInput",function(e){$(this).removeClass(i)}).on("focus.bizInput",function(e){$(this).addClass(s)}).on("blur.bizInput",function(e){$(this).removeClass(s)})},enable:function(){this.main.disabled=!1,this.$main.removeClass(r)},disable:function(){this.main.disabled=!0,this.$main.addClass(r)},destroy:function(){this.$main.removeClass(n+" "+r),this.$main.off("keydown.bizInput").off("mouseover.bizInput").off("mouseout.bizInput").off("focus.bizInput").off("blur.bizInput")}};var u="bizInput";return $.extend($.fn,{bizInput:function(e,n){var r;switch(e){case"enable":this.each(function(){r=$(this).data(u),r&&r.enable()});break;case"disable":this.each(function(){r=$(this).data(u),r&&r.disable()});break;case"destroy":this.each(function(){r=$(this).data(u),r&&(r.destroy(),$(this).data(u,null))});break;default:this.each(function(){!$(this).data(u)&&o(this)&&$(this).data(u,new t(this,e))})}return this}}),t}),n("ui/Textarea",["require"],function(e){function t(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}if(!o(e))return;this.main=e,this.$main=$(this.main),this.options=$.extend({},t||{}),this.init(this.options)}function o(e){return e.nodeType===1&&e.tagName.toLowerCase()==="textarea"}var n="biz-textarea",r="biz-textarea-disable",i="biz-textarea-hover",s="biz-textarea-focus";t.prototype={init:function(e){this.$main.addClass(n),e.disabled&&this.disable(),this.$main.on("mouseover.bizTextarea",function(e){$(this).addClass(i)}).on("mouseout.bizTextarea",function(e){$(this).removeClass(i)}).on("focus.bizTextarea",function(e){$(this).addClass(s)}).on("blur.bizTextarea",function(e){$(this).removeClass(s)})},enable:function(){this.main.disabled=!1,this.$main.removeClass(r)},disable:function(){this.main.disabled=!0,this.$main.addClass(r)},length:function(){return this.main.value.replace(/\r?\n/g,"").length},destroy:function(){this.$main.removeClass(n+" "+r),this.$main.off("mouseover.bizTextarea").off("mouseout.bizTextarea").off("focus.bizTextarea").off("blur.bizTextarea")}};var u="bizTextarea";return $.extend($.fn,{bizTextarea:function(e,n){var r;switch(e){case"enable":this.each(function(){r=$(this).data(u),r&&r.enable()});break;case"disable":this.each(function(){r=$(this).data(u),r&&r.disable()});break;case"destroy":this.each(function(){r=$(this).data(u),r&&(r.destroy(),$(this).data(u,null))});break;case"length":return this.length!==0?this.data(u).length():null;default:this.each(function(){!$(this).data(u)&&o(this)&&$(this).data(u,new t(this,e))})}return this}}),t}),n("ui/Textline",["require"],function(e){function t(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}if(!o(e))return;this.main=e,this.$main=$(this.main),this.options=$.extend({},t||{}),this.init(this.options)}function o(e){return e.nodeType===1&&e.tagName.toLowerCase()==="div"}var n="biz-textline",r="biz-textline-disable",i="biz-textline-hover",s="biz-textline-focus";t.prototype={init:function(e){this.$main.addClass(n).html("<div><pre></pre></div><textarea></textarea>");var t=Math.max(this.$main.width(),200),r=Math.max(this.$main.height(),52);this.$main.css({width:t,height:r}),this.$line=this.$main.children("div").css({height:r-10}),this.$lineNumber=this.$main.find("pre"),this.$textarea=this.$main.children("textarea").css({width:t-36,height:r-12}),e.disabled&&this.disable();var o=this;this.$textarea.on("mouseover.bizTextline",function(e){$(this).addClass(i)}).on("mouseout.bizTextline",function(e){$(this).removeClass(i)}).on("focus.bizTextline",function(e){$(this).addClass(s)}).on("blur.bizTextline",function(e){$(this).removeClass(s)}).on("keyup.bizTextline",function(e){o.renderLineNumber(e.target.scrollTop)}).on("scroll.bizTextline",function(e){o.scrollLineNumber(e.target.scrollTop)}),this.renderLineNumber(0)},enable:function(){this.$textarea[0].disabled=!1,this.$textarea.removeClass(r)},disable:function(){this.$textarea[0].disabled=!0,this.$textarea.addClass(r)},length:function(){return this.$textarea[0].value.replace(/\r?\n/g,"").length},val:function(e){if(undefined===e)return this.$textarea.val();this.$textarea[0].value=e,this.renderLineNumber(0)},destroy:function(){this.$textarea.off("mouseover.bizTextline").off("mouseout.bizTextline").off("focus.bizTextline").off("blur.bizTextline").off("keyup.bizTextline").off("scroll.bizTextline"),this.$main.removeClass(n).empty()},renderLineNumber:function(e){var t=this.$textarea.val().split("\n").length,n="1";for(var r=2;r<=t;r++)n+="\n"+r;this.$lineNumber.html(n),this.scrollLineNumber(e)},scrollLineNumber:function(e){this.$lineNumber.css({top:5-e})}};var u="bizTextline";return $.extend($.fn,{bizTextline:function(e,n){var r;switch(e){case"enable":this.each(function(){r=$(this).data(u),r&&r.enable()});break;case"disable":this.each(function(){r=$(this).data(u),r&&r.disable()});break;case"val":if(undefined===n)return $(this).data(u).val();this.each(function(){r=$(this).data(u),r&&r.val(n)});break;case"destroy":this.each(function(){r=$(this).data(u),r&&(r.destroy(),$(this).data(u,null))});break;case"length":return this.length!==0?this.data(u).length():null;default:this.each(function(){!$(this).data(u)&&o(this)&&$(this).data(u,new t(this,e))})}return this}}),t}),n("ui/Radio",["require"],function(e){function t(e){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}if(!f(e))return;this.main=e,this.$main=$(this.main),this.$group=$('input[name="'+this.$main.attr("name")+'"]'),this.init()}function f(e){return e.nodeType===1&&e.tagName.toLowerCase()==="input"&&e.getAttribute("type").toLowerCase()==="radio"}var n="biz-label",r="biz-radio-unchecked",i="biz-radio-unchecked-hover",s="biz-radio-checked",o="biz-radio-checked-hover",u="biz-radio-unchecked-disabled",a="biz-radio-checked-disabled";t.prototype={init:function(e){var t=this.$main.attr("title"),f=this.$main.attr("id");this.$main.after('<label for="'+f+'">'+t+"</label>").hide(),this.$label=this.$main.next(),this.$label.addClass(n),this.main.checked?this.$label.addClass(this.main.disabled?a:s):this.$label.addClass(this.main.disabled?u:r);var l=this;this.$label.on("mouseover.bizRadio",function(e){l.main.disabled||$(this).addClass(l.main.checked?o:i)}).on("mouseout.bizRadio",function(e){l.main.disabled||$(this).removeClass(l.main.checked?o:i)}).on("click.bizRadio",function(e){l.main.disabled||(l.$group.bizRadio("uncheck"),$(this).attr("class",n+" "+s+" "+o))})},check:function(){this.$group.bizRadio("uncheck"),this.main.checked=!0,this.$label.attr("class",n+" "+(this.main.disabled?a:s))},uncheck:function(){this.main.checked=!1,this.$label.attr("class",n+" "+(this.main.disabled?u:r))},enable:function(){this.main.disabled=!1,this.$label.attr("class",n+" "+(this.main.checked?s:r))},disable:function(){this.main.disabled=!0,this.$label.attr("class",n+" "+(this.main.checked?a:u))},val:function(){return this.main.value},destroy:function(){this.$main.show(),this.$label.off("mouseover.bizRadio").off("mouseout.bizRadio").off("click.bizRadio").remove()}};var l="bizRadio";return $.extend($.fn,{bizRadio:function(e,n){var r;switch(e){case"uncheck":this.each(function(){r=$(this).data(l),r&&r.uncheck()});break;case"enable":this.each(function(){r=$(this).data(l),r&&r.enable()});break;case"disable":this.each(function(){r=$(this).data(l),r&&r.disable()});break;case"destroy":this.each(function(){r=$(this).data(l),r&&(r.destroy(),$(this).data(l,null))});break;case"val":var i;return this.each(function(){r=$(this).data(l),r&&r.main.checked&&(i=r.val())}),i;case"get":var s;return this.each(function(){r=$(this).data(l),n+""===r.main.id&&(s=r)}),s;default:this.each(function(){!$(this).data(l)&&f(this)&&$(this).data(l,new t(this))})}return this}}),t}),n("ui/Checkbox",["require"],function(e){function t(e){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}if(!f(e))return;this.main=e,this.$main=$(this.main),this.$group=$('input[name="'+this.$main.attr("name")+'"]'),this.init()}function f(e){return e.nodeType===1&&e.tagName.toLowerCase()==="input"&&e.getAttribute("type").toLowerCase()==="checkbox"}var n="biz-label",r="biz-checkbox-unchecked",i="biz-checkbox-unchecked-hover",s="biz-checkbox-checked",o="biz-checkbox-checked-hover",u="biz-checkbox-unchecked-disabled",a="biz-checkbox-checked-disabled";t.prototype={init:function(e){var t=this.$main.attr("title"),f=this.$main.attr("id");this.$main.after('<label for="'+f+'">'+t+"</label>").hide(),this.$label=this.$main.next(),this.$label.addClass(n),this.main.checked?this.$label.addClass(this.main.disabled?a:s):this.$label.addClass(this.main.disabled?u:r);var l=this;this.$label.on("mouseover.bizCheckbox",function(e){l.main.disabled||$(this).addClass(l.main.checked?o:i)}).on("mouseout.bizCheckbox",function(e){l.main.disabled||$(this).removeClass(l.main.checked?o:i)}).on("click.bizCheckbox",function(e){l.main.disabled||(l.main.checked?$(this).attr("class",n+" "+r+" "+i):$(this).attr("class",n+" "+s+" "+o))})},check:function(){this.main.checked=!0,this.$label.attr("class",n+" "+(this.main.disabled?a:s))},uncheck:function(){this.main.checked=!1,this.$label.attr("class",n+" "+(this.main.disabled?u:r))},enable:function(){this.main.disabled=!1,this.$label.attr("class",n+" "+(this.main.checked?s:r))},disable:function(){this.main.disabled=!0,this.$label.attr("class",n+" "+(this.main.checked?a:u))},val:function(){return this.main.value},destroy:function(){this.$main.show(),this.$label.off("mouseover.bizCheckbox").off("mouseout.bizCheckbox").off("click.bizCheckbox").remove()}};var l="bizCheckbox";return $.extend($.fn,{bizCheckbox:function(e,n){var r;switch(e){case"check":this.each(function(){r=$(this).data(l),r&&r.check()});break;case"uncheck":this.each(function(){r=$(this).data(l),r&&r.uncheck()});break;case"enable":this.each(function(){r=$(this).data(l),r&&r.enable()});break;case"disable":this.each(function(){r=$(this).data(l),r&&r.disable()});break;case"destroy":this.each(function(){r=$(this).data(l),r&&(r.destroy(),$(this).data(l,null))});break;case"val":var i=[];return this.each(function(){r=$(this).data(l),r&&r.main.checked&&i.push(r.val())}),i.join(",");case"get":var s;return this.each(function(){r=$(this).data(l),n+""===r.main.id&&(s=r)}),s;default:this.each(function(){!$(this).data(l)&&f(this)&&$(this).data(l,new t(this))})}return this}}),t}),n("dep/jquery.selectBox",["require"],function(e){var t=function(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}this.typeTimer=null,this.typeSearch="",this.isMac=navigator.platform.match(/mac/i),t="object"==typeof t?t:{},this.selectElement=e;if(!t.mobile&&navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i))return!1;if("select"!==e.tagName.toLowerCase())return!1;this.init(t)};return t.prototype.version="1.2.0",t.prototype.init=function(e){var t=$(this.selectElement);if(t.data("selectBox-control"))return!1;var n=$('<a class="selectBox" />'),r=t.attr("multiple")||parseInt(t.attr("size"))>1,i=e||{},s=parseInt(t.prop("tabindex"))||0,o=this;n.width(t.outerWidth()).addClass(t.attr("class")).attr("title",t.attr("title")||"").attr("tabindex",s).css("display","inline-block").bind("focus.selectBox",function(){this!==document.activeElement&&document.body!==document.activeElement&&$(document.activeElement).blur();if(n.hasClass("selectBox-active"))return;n.addClass("selectBox-active"),t.trigger("focus")}).bind("blur.selectBox",function(){if(!n.hasClass("selectBox-active"))return;n.removeClass("selectBox-active"),t.trigger("blur")}),$(window).data("selectBox-bindings")||$(window).data("selectBox-bindings",!0).bind("scroll.selectBox",i.hideOnWindowScroll?this.hideMenus:$.noop).bind("resize.selectBox",this.hideMenus),t.attr("disabled")&&n.addClass("selectBox-disabled"),t.bind("click.selectBox",function(e){n.focus(),e.preventDefault()});if(r){e=this.getOptions("inline"),n.append(e).data("selectBox-options",e).addClass("selectBox-inline selectBox-menuShowing").bind("keydown.selectBox",function(e){o.handleKeyDown(e)}).bind("keypress.selectBox",function(e){o.handleKeyPress(e)}).bind("mousedown.selectBox",function(e){if(1!==e.which)return;$(e.target).is("A.selectBox-inline")&&e.preventDefault(),n.hasClass("selectBox-focus")||n.focus()}).insertAfter(t);if(!t[0].style.height){var u=t.attr("size")?parseInt(t.attr("size")):5,a=n.clone().removeAttr("id").css({position:"absolute",top:"-9999em"}).show().appendTo("body");a.find(".selectBox-options").html("<li><a> </a></li>");var f=parseInt(a.find(".selectBox-options A:first").html("&nbsp;").outerHeight());a.remove(),n.height(f*u)}this.disableSelection(n)}else{var l=$('<span class="selectBox-label" />'),c=$('<span class="selectBox-arrow" />');l.attr("class",this.getLabelClass()).text(this.getLabelText()),e=this.getOptions("dropdown"),e.appendTo("BODY"),n.data("selectBox-options",e).addClass("selectBox-dropdown").append(l).append(c).bind("mousedown.selectBox",function(t){1===t.which&&(n.hasClass("selectBox-menuShowing")?o.hideMenus():(t.stopPropagation(),e.data("selectBox-down-at-x",t.screenX).data("selectBox-down-at-y",t.screenY),o.showMenu()))}).bind("keydown.selectBox",function(e){o.handleKeyDown(e)}).bind("keypress.selectBox",function(e){o.handleKeyPress(e)}).bind("open.selectBox",function(e,t){if(t&&t._selectBox===!0)return;o.showMenu()}).bind("close.selectBox",function(e,t){if(t&&t._selectBox===!0)return;o.hideMenus()}).insertAfter(t);var h=n.width()-c.outerWidth()-(parseInt(l.css("paddingLeft"))||0)-(parseInt(l.css("paddingRight"))||0);l.width(h),this.disableSelection(n)}t.addClass("selectBox").data("selectBox-control",n).data("selectBox-settings",i).hide()},t.prototype.getOptions=function(e){var t,n=$(this.selectElement),r=this,i=function(e,t){return e.children("OPTION, OPTGROUP").each(function(){if($(this).is("OPTION"))$(this).length>0?r.generateOptions($(this),t):t.append("<li> </li>");else{var e=$('<li class="selectBox-optgroup" />');e.text($(this).attr("label")),t.append(e),t=i($(this),t)}}),t};switch(e){case"inline":return t=$('<ul class="selectBox-options" />'),t=i(n,t),t.find("A").bind("mouseover.selectBox",function(e){r.addHover($(this).parent())}).bind("mouseout.selectBox",function(e){r.removeHover($(this).parent())}).bind("mousedown.selectBox",function(e){if(1!==e.which)return;e.preventDefault(),n.selectBox("control").hasClass("selectBox-active")||n.selectBox("control").focus()}).bind("mouseup.selectBox",function(e){if(1!==e.which)return;r.hideMenus(),r.selectOption($(this).parent(),e)}),this.disableSelection(t),t;case"dropdown":t=$('<ul class="selectBox-dropdown-menu selectBox-options" />'),t=i(n,t),t.data("selectBox-select",n).css("display","none").appendTo("BODY").find("A").bind("mousedown.selectBox",function(e){e.which===1&&(e.preventDefault(),e.screenX===t.data("selectBox-down-at-x")&&e.screenY===t.data("selectBox-down-at-y")&&(t.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),/android/i.test(navigator.userAgent.toLowerCase())&&/chrome/i.test(navigator.userAgent.toLowerCase())&&r.selectOption($(this).parent()),r.hideMenus()))}).bind("mouseup.selectBox",function(e){if(1!==e.which)return;if(e.screenX===t.data("selectBox-down-at-x")&&e.screenY===t.data("selectBox-down-at-y"))return;t.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),r.selectOption($(this).parent()),r.hideMenus()}).bind("mouseover.selectBox",function(e){r.addHover($(this).parent())}).bind("mouseout.selectBox",function(e){r.removeHover($(this).parent())});var s=n.attr("class")||"";if(""!==s){s=s.split(" ");for(var o=0;o<s.length;o++)t.addClass(s[o]+"-selectBox-dropdown-menu")}return this.disableSelection(t),t}},t.prototype.getLabelClass=function(){var e=$(this.selectElement).find("OPTION:selected");return("selectBox-label "+(e.attr("class")||"")).replace(/\s+$/,"")},t.prototype.getLabelText=function(){var e=$(this.selectElement).find("OPTION:selected");return e.text()||" "},t.prototype.setLabel=function(){var e=$(this.selectElement),t=e.data("selectBox-control");if(!t)return;t.find(".selectBox-label").attr("class",this.getLabelClass()).text(this.getLabelText())},t.prototype.destroy=function(){var e=$(this.selectElement),t=e.data("selectBox-control");if(!t)return;var n=t.data("selectBox-options");n.remove(),t.remove(),e.removeClass("selectBox").removeData("selectBox-control").data("selectBox-control",null).removeData("selectBox-settings").data("selectBox-settings",null).show()},t.prototype.refresh=function(){var e=$(this.selectElement),t=e.data("selectBox-control"),n=t.hasClass("selectBox-dropdown")?"dropdown":"inline",r;t.data("selectBox-options").remove(),r=this.getOptions(n),t.data("selectBox-options",r);switch(n){case"inline":t.append(r);break;case"dropdown":this.setLabel(),$("BODY").append(r)}"dropdown"===n&&t.hasClass("selectBox-menuShowing")&&this.showMenu()},t.prototype.showMenu=function(){var e=this,t=$(this.selectElement),n=t.data("selectBox-control"),r=t.data("selectBox-settings"),i=n.data("selectBox-options");if(n.hasClass("selectBox-disabled"))return!1;this.hideMenus();var s=parseInt(n.css("borderBottomWidth"))||0,o=parseInt(n.css("borderTopWidth"))||0,u=n.offset(),a=r.topPositionCorrelation?r.topPositionCorrelation:0,f=r.bottomPositionCorrelation?r.bottomPositionCorrelation:0,l=i.outerHeight(),c=n.outerHeight(),h=parseInt(i.css("max-height")),p=$(window).scrollTop(),d=u.top-p,v=$(window).height()-(d+c),m=d>v&&(r.keepInViewport===null?!0:r.keepInViewport),g=m?u.top-l+o+a:u.top+c-s-f;if(d<h&&v<h){var y;m?(y=h-(d-5),i.css({"max-height":h-y+"px"}),g+=y):(y=h-(v-5),i.css({"max-height":h-y+"px"}))}i.data("posTop",m),i.width(n.innerWidth()).css({top:g,left:n.offset().left}).addClass("selectBox-options selectBox-options-"+(m?"top":"bottom"));if(t.triggerHandler("beforeopen"))return!1;var b=function(){t.triggerHandler("open",{_selectBox:!0})};switch(r.menuTransition){case"fade":i.fadeIn(r.menuSpeed,b);break;case"slide":i.slideDown(r.menuSpeed,b);break;default:i.show(r.menuSpeed,b)}r.menuSpeed||b();var w=i.find(".selectBox-selected:first");this.keepOptionInView(w,!0),this.addHover(w),n.addClass("selectBox-menuShowing selectBox-menuShowing-"+(m?"top":"bottom")),$(document).bind("mousedown.selectBox",function(t){if(1===t.which){if($(t.target).parents().andSelf().hasClass("selectBox-options"))return;e.hideMenus()}})},t.prototype.hideMenus=function(){if($(".selectBox-dropdown-menu:visible").length===0)return;$(document).unbind("mousedown.selectBox"),$(".selectBox-dropdown-menu").each(function(){var e=$(this),t=e.data("selectBox-select"),n=t.data("selectBox-control"),r=t.data("selectBox-settings"),i=e.data("posTop");if(t.triggerHandler("beforeclose"))return!1;var s=function(){t.triggerHandler("close",{_selectBox:!0})};if(r){switch(r.menuTransition){case"fade":e.fadeOut(r.menuSpeed,s);break;case"slide":e.slideUp(r.menuSpeed,s);break;default:e.hide(r.menuSpeed,s)}r.menuSpeed||s(),n.removeClass("selectBox-menuShowing selectBox-menuShowing-"+(i?"top":"bottom"))}else $(this).hide(),$(this).triggerHandler("close",{_selectBox:!0}),$(this).removeClass("selectBox-menuShowing selectBox-menuShowing-"+(i?"top":"bottom"));e.css("max-height",""),e.removeClass("selectBox-options-"+(i?"top":"bottom")),e.data("posTop",!1)})},t.prototype.selectOption=function(e,t){var n=$(this.selectElement);e=$(e);var r=n.data("selectBox-control"),i=n.data("selectBox-settings");if(r.hasClass("selectBox-disabled"))return!1;if(0===e.length||e.hasClass("selectBox-disabled"))return!1;if(n.attr("multiple"))if(t.shiftKey&&r.data("selectBox-last-selected")){e.toggleClass("selectBox-selected");var s;e.index()>r.data("selectBox-last-selected").index()?s=e.siblings().slice(r.data("selectBox-last-selected").index(),e.index()):s=e.siblings().slice(e.index(),r.data("selectBox-last-selected").index()),s=s.not(".selectBox-optgroup, .selectBox-disabled"),e.hasClass("selectBox-selected")?s.addClass("selectBox-selected"):s.removeClass("selectBox-selected")}else this.isMac&&t.metaKey||!this.isMac&&t.ctrlKey?e.toggleClass("selectBox-selected"):(e.siblings().removeClass("selectBox-selected"),e.addClass("selectBox-selected"));else e.siblings().removeClass("selectBox-selected"),e.addClass("selectBox-selected");r.hasClass("selectBox-dropdown")&&r.find(".selectBox-label").text(e.text());var o=0,u=[];return n.attr("multiple")?r.find(".selectBox-selected A").each(function(){u[o++]=$(this).attr("rel")}):u=e.find("A").attr("rel"),r.data("selectBox-last-selected",e),n.val()!==u&&(n.val(u),this.setLabel(),n.trigger("change")),!0},t.prototype.addHover=function(e){e=$(e);var t=$(this.selectElement),n=t.data("selectBox-control"),r=n.data("selectBox-options");r.find(".selectBox-hover").removeClass("selectBox-hover"),e.addClass("selectBox-hover")},t.prototype.getSelectElement=function(){return this.selectElement},t.prototype.removeHover=function(e){e=$(e);var t=$(this.selectElement),n=t.data("selectBox-control"),r=n.data("selectBox-options");r.find(".selectBox-hover").removeClass("selectBox-hover")},t.prototype.keepOptionInView=function(e,t){if(!e||e.length===0)return;var n=$(this.selectElement),r=n.data("selectBox-control"),i=r.data("selectBox-options"),s=r.hasClass("selectBox-dropdown")?i:i.parent(),o=parseInt(e.offset().top-s.position().top),u=parseInt(o+e.outerHeight());t?s.scrollTop(e.offset().top-s.offset().top+s.scrollTop()-s.height()/2):(o<0&&s.scrollTop(e.offset().top-s.offset().top+s.scrollTop()),u>s.height()&&s.scrollTop(e.offset().top+e.outerHeight()-s.offset().top+s.scrollTop()-s.height()))},t.prototype.handleKeyDown=function(e){var t=$(this.selectElement),n=t.data("selectBox-control"),r=n.data("selectBox-options"),i=t.data("selectBox-settings"),s=0,o=0;if(n.hasClass("selectBox-disabled"))return;switch(e.keyCode){case 8:e.preventDefault(),this.typeSearch="";break;case 9:case 27:this.hideMenus(),this.removeHover();break;case 13:n.hasClass("selectBox-menuShowing")?(this.selectOption(r.find("LI.selectBox-hover:first"),e),n.hasClass("selectBox-dropdown")&&this.hideMenus()):this.showMenu();break;case 38:case 37:e.preventDefault();if(n.hasClass("selectBox-menuShowing")){var u=r.find(".selectBox-hover").prev("LI");s=r.find("LI:not(.selectBox-optgroup)").length,o=0;while(u.length===0||u.hasClass("selectBox-disabled")||u.hasClass("selectBox-optgroup")){u=u.prev("LI"),u.length===0&&(i.loopOptions?u=r.find("LI:last"):u=r.find("LI:first"));if(++o>=s)break}this.addHover(u),this.selectOption(u,e),this.keepOptionInView(u)}else this.showMenu();break;case 40:case 39:e.preventDefault();if(n.hasClass("selectBox-menuShowing")){var a=r.find(".selectBox-hover").next("LI");s=r.find("LI:not(.selectBox-optgroup)").length,o=0;while(0===a.length||a.hasClass("selectBox-disabled")||a.hasClass("selectBox-optgroup")){a=a.next("LI"),a.length===0&&(i.loopOptions?a=r.find("LI:first"):a=r.find("LI:last"));if(++o>=s)break}this.addHover(a),this.selectOption(a,e),this.keepOptionInView(a)}else this.showMenu()}},t.prototype.handleKeyPress=function(e){var t=$(this.selectElement),n=t.data("selectBox-control"),r=n.data("selectBox-options"),i=this;if(n.hasClass("selectBox-disabled"))return;switch(e.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;default:n.hasClass("selectBox-menuShowing")||this.showMenu(),e.preventDefault(),clearTimeout(this.typeTimer),this.typeSearch+=String.fromCharCode(e.charCode||e.keyCode),r.find("A").each(function(){if($(this).text().substr(0,i.typeSearch.length).toLowerCase()===i.typeSearch.toLowerCase())return i.addHover($(this).parent()),i.selectOption($(this).parent(),e),i.keepOptionInView($(this).parent()),!1}),this.typeTimer=setTimeout(function(){i.typeSearch=""},1e3)}},t.prototype.enable=function(){var e=$(this.selectElement);e.prop("disabled",!1);var t=e.data("selectBox-control");if(!t)return;t.removeClass("selectBox-disabled")},t.prototype.disable=function(){var e=$(this.selectElement);e.prop("disabled",!0);var t=e.data("selectBox-control");if(!t)return;t.addClass("selectBox-disabled")},t.prototype.setValue=function(e){var t=$(this.selectElement);t.val(e),e=t.val(),null===e&&(e=t.children().first().val(),t.val(e));var n=t.data("selectBox-control");if(!n)return;var r=t.data("selectBox-settings"),i=n.data("selectBox-options");this.setLabel(),i.find(".selectBox-selected").removeClass("selectBox-selected"),i.find("A").each(function(){if(typeof e=="object")for(var t=0;t<e.length;t++)$(this).attr("rel")==e[t]&&$(this).parent().addClass("selectBox-selected");else $(this).attr("rel")==e&&$(this).parent().addClass("selectBox-selected")}),r.change&&r.change.call(t)},t.prototype.disableSelection=function(e){$(e).css("MozUserSelect","none").bind("selectstart",function(e){e.preventDefault()})},t.prototype.generateOptions=function(e,t){var n=$("<li />"),r=$("<a />");n.addClass(e.attr("class")),n.data(e.data()),r.attr("rel",e.val()).text(e.text()),n.append(r),e.attr("disabled")&&n.addClass("selectBox-disabled"),e.attr("selected")&&n.addClass("selectBox-selected"),t.append(n)},$.extend($.fn,{setOptions:function(e){var t=$(this),n=t.data("selectBox-control");switch(typeof e){case"string":t.html(e);break;case"object":t.html("");for(var r in e){if(e[r]===null)continue;if(typeof e[r]=="object"){var i=$('<optgroup label="'+r+'" />');for(var s in e[r])i.append('<option value="'+s+'">'+e[r][s]+"</option>");t.append(i)}else{var o=$('<option value="'+r+'">'+e[r]+"</option>");t.append(o)}}}n&&$(this).selectBox("refresh")},selectBox:function(e,n){var r;switch(e){case"control":return $(this).data("selectBox-control");case"settings":if(!n)return $(this).data("selectBox-settings");$(this).each(function(){$(this).data("selectBox-settings",$.extend(!0,$(this).data("selectBox-settings"),n))});break;case"options":if(undefined===n)return $(this).data("selectBox-control").data("selectBox-options");$(this).each(function(){$(this).setOptions(n)});break;case"value":if(undefined===n)return $(this).val();$(this).each(function(){r=$(this).data("selectBox"),r&&r.setValue(n)});break;case"refresh":$(this).each(function(){r=$(this).data("selectBox"),r&&r.refresh()});break;case"enable":$(this).each(function(){r=$(this).data("selectBox"),r&&r.enable(this)});break;case"disable":$(this).each(function(){r=$(this).data("selectBox"),r&&r.disable()});break;case"destroy":$(this).each(function(){r=$(this).data("selectBox"),r&&(r.destroy(),$(this).data("selectBox",null))});break;case"instance":return $(this).data("selectBox");default:$(this).each(function(n,r){$(r).data("selectBox")||$(r).data("selectBox",new t(r,e))})}return $(this)}}),t}),n("ui/Select",["require","dep/jquery.selectBox"],function(e){function n(e,n){n=$.extend({},n||{}),this.instance=new t($(e),{loopOptions:n.loop}),this.main=this.instance.selectElement,this.$main=$(this.main)}function r(e){return e.nodeType===1&&e.tagName.toLowerCase()==="select"}var t=e("dep/jquery.selectBox");n.prototype={enable:function(){this.instance.enable()},disable:function(){this.instance.disable()},refresh:function(){this.instance.refresh()},val:function(e){if(undefined===e)return this.$main.val();this.instance.setValue(e)},destroy:function(){this.instance.destroy()}};var i="bizSelect";return $.extend($.fn,{bizSelect:function(e,t){var s;switch(e){case"enable":this.each(function(){s=$(this).data(i),s&&s.enable()});break;case"disable":this.each(function(){s=$(this).data(i),s&&s.disable()});break;case"refresh":this.each(function(){s=$(this).data(i),s&&s.refresh()});break;case"val":if(undefined===t)return $(this).val();this.each(function(){s=$(this).data(i),s&&s.val(t)});break;case"destroy":this.each(function(){s=$(this).data(i),s&&(s.destroy(),$(this).data(i,null))});break;default:this.each(function(){!$(this).data(i)&&r(this)&&$(this).data(i,new n(this,e))})}return this}}),n}),n("ui/Dialog",["require"],function(e){function t(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}if(!r(e))return;this.main=e,this.$main=$(this.main);var n={width:480,height:240,buttons:[]};this.options=$.extend(n,t||{}),this.init(this.options)}function r(e){return e.nodeType===1&&e.tagName.toLowerCase()==="div"&&e.hasAttribute("title")}var n="biz-dialog";t.prototype={init:function(e){var t=this.$main.attr("title"),r=this.$main.html(),i=this;this.orginContent=r,this.$main.hide().addClass(n).removeAttr("title").html(['<h1 class="biz-dialog-title">',"<span>",t,"</span>",'<span class="biz-dialog-close"></span></h1>','<div class="biz-dialog-content">',r,"</div>",'<div class="biz-dialog-bottom"></div>'].join("")).css({width:e.width,height:e.height,marginLeft:-Math.floor(e.width/2),marginTop:-Math.floor(e.height/2)}).after('<div class="biz-mask" style="display:none"></div>').on("click",".biz-dialog-close",function(){i.close()}),this.$main.find(".biz-dialog-content").css({height:e.height-150});var s=this.$main.find(".biz-dialog-bottom");$.each(e.buttons,function(e,t){$("<button>"+t.text+"</button>").bizButton({theme:t.theme}).click(function(e){t.click.call(i,e)}).appendTo(s)})},open:function(){this.$main.next().show(),this.$main.fadeIn()},close:function(){this.$main.hide(),this.$main.next().fadeOut()},destroy:function(){this.$main.removeClass(n).attr("title",this.$main.find(".biz-dialog-title").text()).removeAttr("style").hide().off("click"),this.$main.find(".biz-dialog-bottom button").bizButton("destroy"),this.$main.html(this.orginContent).next().remove(),this.orginContent=null}},t.alert=function(e){var t=$('<div style="display:none" class="bizui-alert" title="'+e.title+'">'+e.content+"</div>");t.appendTo("body").bizDialog({width:360,height:200,buttons:[{text:e.ok,click:function(){t.bizDialog("destroy").remove()}}]}).next().css({zIndex:1002}),t.find(".biz-dialog-close").remove(),t.bizDialog("open")},t.confirm=function(e){var t=$('<div style="display:none" class="bizui-confirm" title="'+e.title+'">'+e.content+"</div>");t.appendTo("body").bizDialog({width:360,height:200,buttons:[{text:e.ok,click:function(){t.bizDialog("destroy").remove(),e.onOK&&e.onOK()}},{text:e.cancel,click:function(){t.bizDialog("destroy").remove()},theme:"dark"}]}).next().css({zIndex:1002}),t.find(".biz-dialog-close").remove(),t.bizDialog("open")};var i="bizDialog";return $.extend($.fn,{bizDialog:function(e,n){var s;switch(e){case"open":this.each(function(){s=$(this).data(i),s&&s.open()});break;case"close":this.each(function(){s=$(this).data(i),s&&s.close()});break;case"destroy":this.each(function(){s=$(this).data(i),s&&(s.destroy(),$(this).data(i,null))});break;default:this.each(function(){!$(this).data(i)&&r(this)&&$(this).data(i,new t(this,e))})}return this}}),t}),n("ui/Panel",["require"],function(e){function t(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}if(!r(e))return;this.main=e,this.$main=$(this.main);var n={marginLeft:200,buttons:[]};this.options=$.extend(n,t||{}),this.init(this.options)}function r(e){return e.nodeType===1&&e.tagName.toLowerCase()==="div"&&e.hasAttribute("title")}var n="biz-panel";t.prototype={init:function(e){var t=this.$main.attr("title"),r=this.$main.html(),i=this;this.orginContent=r,this.$main.hide().addClass(n).removeAttr("title").html(['<div class="biz-panel-margin"></div>','<div class="biz-panel-body">','<h1 class="biz-panel-title">',t,"</h1>",'<div class="biz-panel-content">',r,"</div>",'<div class="biz-panel-bottom"></div></div>'].join("")).after('<div class="biz-mask" style="display:none"></div>'),this.$main.find(".biz-panel-margin").css({width:e.marginLeft});var s=this.$main.find(".biz-panel-bottom");$.each(e.buttons,function(e,t){$("<button>"+t.text+"</button>").bizButton({theme:t.theme}).click(function(e){t.click.call(i,e)}).appendTo(s)})},open:function(){$("body").css({overflow:"hidden"}),this.$main.next().show();var e=this;this.$main.css({top:Math.max(document.body.scrollTop,document.documentElement.scrollTop)}).show().animate({left:0},300,function(){e.$main.find(".biz-panel-body")[0].scrollTop=0})},close:function(){var e=this;this.$main.animate({left:Math.max(document.body.offsetWidth,document.documentElement.offsetWidth)},300,function(){e.$main.hide(),e.$main.next().hide(),$("body").css({overflow:"visible"})})},destroy:function(){this.$main.removeClass(n).attr("title",this.$main.find(".biz-panel-title").text()).removeAttr("style").hide(),this.$main.find(".biz-panel-bottom button").bizButton("destroy"),this.$main.html(this.orginContent).next().remove(),this.orginContent=null}};var i="bizPanel";return $.extend($.fn,{bizPanel:function(e,n){var s;switch(e){case"open":this.each(function(){s=$(this).data(i),s&&s.open()});break;case"close":this.each(function(){s=$(this).data(i),s&&s.close()});break;case"destroy":this.each(function(){s=$(this).data(i),s&&(s.destroy(),$(this).data(i,null))});break;default:this.each(function(){!$(this).data(i)&&r(this)&&$(this).data(i,new t(this,e))})}return this}}),t}),n("ui/Tooltip",["require"],function(e){function u(e,n){var r={},i=e.outerHeight(),s=e.outerWidth(),o=e.offset();return r.height=t.outerHeight(!0),r.width=t.outerWidth(!0),r.offset={},r.offset.top=o.top,r.offset.left=o.left,r.offset.right=r.offset.left+s,r.offset.bottom=r.offset.top+i,r.offset.hCenter=r.offset.left+Math.floor(s/2),r.offset.vCenter=r.offset.top+Math.floor(i/2),r.css={},r.on={},r.off={},r.arrow={},r}function a(e,t,n,r){var i,s;n=parseInt(n),r=parseInt(r);switch(t){case"top":i=o.scrollTop(),e.offset.top-e.height-n-r<i&&(s="bottom"),e.on.top=e.offset.top-e.height-n,e.off.top=e.on.top+r,e.css.top=e.on.top-r,e.css.left=h(e,!0);break;case"left":i=o.scrollLeft(),e.offset.left-e.width-n-r<i&&(s="right"),e.on.left=e.offset.left-e.width-n,e.off.left=e.on.left+r,e.css.top=h(e,!1),e.css.left=e.on.left-r;break;case"bottom":i=o.scrollTop()+o.height(),e.offset.bottom+e.height+n+r>i&&(s="top"),e.on.top=e.offset.bottom+n,e.off.top=e.offset.bottom-r+n,e.css.top=e.on.top+r,e.css.left=h(e,!0);break;case"right":i=o.scrollLeft()+o.width(),e.offset.right+e.width+n+r>i&&(s="left"),e.on.left=e.offset.right+n,e.off.left=e.on.left-r,e.css.left=e.on.left+r,e.css.top=h(e,!1)}s&&!e.over?(e.over=!0,a(e,s,n,r)):(e.direction=t,l(e,t),f(e,t))}function f(e,t){var n;if(t=="top"||t=="bottom")n=o.scrollLeft()-e.css.left+5,n>0&&(e.css.left+=Math.abs(n),e.arrow.left-=n),n=e.css.left+e.width-(o.scrollLeft()+o.width())+5,n>0&&(e.css.left-=Math.abs(n),e.arrow.left+=n);else if(t=="left"||t=="right")n=o.scrollTop()-e.css.top+5,n>0&&(e.css.top+=Math.abs(n),e.arrow.top-=n),n=e.css.top+e.height-(o.scrollTop()+o.height())+5,n>0&&(e.css.top-=Math.abs(n),e.arrow.top+=n)}function l(e,t){t=="left"||t=="right"?e.arrow.top=Math.floor(e.height/2-i/2):e.arrow.left=Math.floor(e.width/2-r/2),e.arrow[c(t)]=-i}function c(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"left":return"right";case"right":return"left"}}function h(e,t){return t?e.offset.hCenter+ -e.width/2:e.offset.vCenter+ -e.height/2}function p(e,r,i,s){var o=g("color",r,i,"white"),u=g("duration",r,i,150);t.attr("class",o+" "+e.direction),t.stop(!0,!0).css(e.css),n.attr("style","").css(e.arrow),t.animate(e.on,{duration:u,queue:!1,complete:s}),t.fadeIn(u)}function d(e,n,r,i){var s=g("duration",n,r,100);t.animate(e.off,{duration:s,queue:!1,complete:i}),t.fadeOut(s)}function v(e){return/&/.test(e)&&(e=$("<p/>").html(e).text()),e}function m(e,t){var n,r;try{r=$(document.body).find(t)}catch(i){}r&&r.length>0?n=r.html():n=v(t),s.html(n)}function g(e,t,n,r){return y(t[e],n.data("tooltip-"+e),r)}function y(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e]}function b(e){e!=="destroy"?$("#biz-tooltip").length===0&&(t=$('<div id="biz-tooltip" />').appendTo(document.body).css("position","absolute").hide(),n=$('<div class="arrow" />').appendTo(t),s=$('<div class="content" />').appendTo(t),o=$(window),r=n.width(),i=n.height(),$("[title]").bizTooltip(e)):($("#biz-tooltip").remove(),$("[title]").each(function(){$(this).unbind("mouseenter").unbind("mouseleave")}))}var t,n,r,i,s,o;return $.extend($.fn,{bizTooltip:function(e){e=e||{},this.each(function(){var n=$(this),r=n.attr("title");if(!r)return;var i=!1,s,o;n.unbind("mouseenter").mouseenter(function(){var t=g("delay",e,n,300);clearTimeout(o),o=setTimeout(function(){var t=g("margin",e,n,20),o=g("slide",e,n,10),f=g("direction",e,n,"top"),l=n.attr("title");l&&(r=l),n.removeAttr("title"),m(n,e.html||r),s=u(n,e),a(s,f,t,o),p(s,e,n,function(){i=!1}),i=!0},t)}),n.unbind("mouseleave").mouseleave(function(){clearTimeout(o);if(!s)return;i?t.fadeOut(100,function(){i=!1}):d(s,e,n,function(){i=!1}),s=null,i=!0})})}}),b}),n("ui/Tab",["require"],function(e){function t(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}if(!r(e))return;this.main=e,this.$main=$(this.main);var n={event:"click"};this.options=$.extend(n,t||{}),this.init(this.options)}function r(e){return e.nodeType===1&&e.tagName.toLowerCase()==="div"}var n="biz-tab";t.prototype={init:function(e){this.$main.addClass(n),this.tabs=this.$main.find("ul li"),this.contents=this.$main.children("div").children("div").hide(),$(this.tabs[0]).addClass("active"),$(this.contents[0]).show();var t=this;this.$main.on(e.event+".bizTab","ul li",function(n){var r=$(n.target);if(!r.hasClass("active")){t.tabs.removeClass("active"),r.addClass("active");var i;$.each(t.tabs,function(e,t){t===n.target&&(i=e)}),t.contents.hide(),$(t.contents[i]).show(),e.onChange&&e.onChange.call(t,{title:r.text(),index:i},n)}})},destroy:function(){this.$main.removeClass(n),this.$main.off(this.options.event+".bizTab")}};var i="bizTab";return $.extend($.fn,{bizTab:function(e,n){var s;switch(e){case"destroy":this.each(function(){s=$(this).data(i),s&&(s.destroy(),$(this).data(i,null))});break;default:this.each(function(){!$(this).data(i)&&r(this)&&$(this).data(i,new t(this,e))})}return this}}),t}),n("dep/jquery.simplePagination",["require"],function(e){var t={init:function(e){var n=$.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:0,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",cssStyle:"light-theme",listStyle:"",labelMap:[],selectOnClick:!0,nextAtFront:!1,invertPageOrder:!1,useStartEdge:!0,useEndEdge:!0,onPageClick:function(e,t){},onInit:function(){}},e||{}),r=this;return n.pages=n.pages?n.pages:Math.ceil(n.items/n.itemsOnPage)?Math.ceil(n.items/n.itemsOnPage):1,n.currentPage?n.currentPage=n.currentPage-1:n.currentPage=n.invertPageOrder?n.pages-1:0,n.halfDisplayed=n.displayedPages/2,this.each(function(){r.addClass(n.cssStyle+" simple-pagination").data("pagination",n),t._draw.call(r)}),n.onInit(),this},selectPage:function(e){return t._selectPage.call(this,e-1),this},prevPage:function(){var e=this.data("pagination");return e.invertPageOrder?e.currentPage<e.pages-1&&t._selectPage.call(this,e.currentPage+1):e.currentPage>0&&t._selectPage.call(this,e.currentPage-1),this},nextPage:function(){var e=this.data("pagination");return e.invertPageOrder?e.currentPage>0&&t._selectPage.call(this,e.currentPage-1):e.currentPage<e.pages-1&&t._selectPage.call(this,e.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},setPagesCount:function(e){this.data("pagination").pages=e},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(e){var n=this.data("pagination");return n.currentPage=e-1,this.data("pagination",n),t._draw.call(this),this},redraw:function(){return t._draw.call(this),this},disable:function(){var e=this.data("pagination");return e.disabled=!0,this.data("pagination",e),t._draw.call(this),this},enable:function(){var e=this.data("pagination");return e.disabled=!1,this.data("pagination",e),t._draw.call(this),this},updateItems:function(e){var n=this.data("pagination");n.items=e,n.pages=t._getPages(n),this.data("pagination",n),t._draw.call(this),t._selectPage.call(this,0)},updateItemsOnPage:function(e){var n=this.data("pagination");return n.itemsOnPage=e,n.pages=t._getPages(n),this.data("pagination",n),t._selectPage.call(this,0),this},getItemsOnPage:function(){return this.data("pagination").itemsOnPage},_draw:function(){var e=this.data("pagination"),n=t._getInterval(e),r,i,s,o;t.destroy.call(this),i=typeof this.prop=="function"?this.prop("tagName"):this.attr("tagName");var u=i==="UL"?this:$("<ul"+(e.listStyle?' class="'+e.listStyle+'"':"")+"></ul>").appendTo(this);e.prevText&&t._appendItem.call(this,e.invertPageOrder?e.currentPage+1:e.currentPage-1,{text:e.prevText,classes:"prev"}),e.nextText&&e.nextAtFront&&t._appendItem.call(this,e.invertPageOrder?e.currentPage-1:e.currentPage+1,{text:e.nextText,classes:"next"});if(!e.invertPageOrder){if(n.start>0&&e.edges>0){if(e.useStartEdge){o=Math.min(e.edges,n.start);for(r=0;r<o;r++)t._appendItem.call(this,r)}e.edges<n.start&&n.start-e.edges!=1?u.append('<li class="disabled"><span class="ellipse">'+e.ellipseText+"</span></li>"):n.start-e.edges==1&&t._appendItem.call(this,e.edges)}}else if(n.end<e.pages&&e.edges>0){if(e.useStartEdge){s=Math.max(e.pages-e.edges,n.end);for(r=e.pages-1;r>=s;r--)t._appendItem.call(this,r)}e.pages-e.edges>n.end&&e.pages-e.edges-n.end!=1?u.append('<li class="disabled"><span class="ellipse">'+e.ellipseText+"</span></li>"):e.pages-e.edges-n.end==1&&t._appendItem.call(this,n.end)}if(!e.invertPageOrder)for(r=n.start;r<n.end;r++)t._appendItem.call(this,r);else for(r=n.end-1;r>=n.start;r--)t._appendItem.call(this,r);if(!e.invertPageOrder){if(n.end<e.pages&&e.edges>0){e.pages-e.edges>n.end&&e.pages-e.edges-n.end!=1?u.append('<li class="disabled"><span class="ellipse">'+e.ellipseText+"</span></li>"):e.pages-e.edges-n.end==1&&t._appendItem.call(this,n.end);if(e.useEndEdge){s=Math.max(e.pages-e.edges,n.end);for(r=s;r<e.pages;r++)t._appendItem.call(this,r)}}}else if(n.start>0&&e.edges>0){e.edges<n.start&&n.start-e.edges!=1?u.append('<li class="disabled"><span class="ellipse">'+e.ellipseText+"</span></li>"):n.start-e.edges==1&&t._appendItem.call(this,e.edges);if(e.useEndEdge){o=Math.min(e.edges,n.start);for(r=o-1;r>=0;r--)t._appendItem.call(this,r)}}e.nextText&&!e.nextAtFront&&t._appendItem.call(this,e.invertPageOrder?e.currentPage-1:e.currentPage+1,{text:e.nextText,classes:"next"})},_getPages:function(e){var t=Math.ceil(e.items/e.itemsOnPage);return t||1},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pages-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pages):Math.min(e.displayedPages,e.pages))}},_appendItem:function(e,n){var r=this,i,s,o=r.data("pagination"),u=$("<li></li>"),a=r.find("ul");e=e<0?0:e<o.pages?e:o.pages-1,i={text:e+1,classes:""},o.labelMap.length&&o.labelMap[e]&&(i.text=o.labelMap[e]),i=$.extend(i,n||{}),e==o.currentPage||o.disabled?(o.disabled||i.classes==="prev"||i.classes==="next"?u.addClass("disabled"):u.addClass("active"),s=$('<span class="current">'+i.text+"</span>")):(s=$('<a href="javascript:void(0)" class="page-link">'+i.text+"</a>"),s.click(function(n){return t._selectPage.call(r,e,n)})),i.classes&&s.addClass(i.classes),u.append(s),a.length?a.append(u):r.append(u)},_selectPage:function(e,n){var r=this.data("pagination");return r.currentPage=e,r.selectOnClick&&t._draw.call(this),r.onPageClick(e+1,n)}};return $.fn.pagination=function(e){if(t[e]&&e.charAt(0)!="_")return t[e].apply(this,Array.prototype.slice.call(arguments,1));if(typeof e=="object"||!e)return t.init.apply(this,arguments);$.error("Method "+e+" does not exist on jQuery.pagination")},t}),n("ui/Page",["require","dep/jquery.simplePagination"],function(e){function n(e,n){n=$.extend({},n||{}),this.instance=t.init.call($(e),{itemsOnPage:n.pageSize,currentPage:n.pageNumber,items:n.totalNumber,prevText:n.prevText||"◀",nextText:n.nextText||"▶",onPageClick:n.onPageClick})}function r(e){return e.nodeType===1&&e.tagName.toLowerCase()==="div"}var t=e("dep/jquery.simplePagination");n.prototype={setPageSize:function(e){this.instance.pagination("updateItemsOnPage",e)},setPageNumber:function(e){this.instance.pagination("selectPage",e)},setTotalNumber:function(e){this.instance.pagination("updateItems",e)},getPageNumber:function(){return this.instance.pagination("getCurrentPage")},getTotalNumber:function(){return this.instance.pagination("getPagesCount")},destroy:function(){this.instance.pagination("destroy")}};var i="bizPage";return $.extend($.fn,{bizPage:function(e,t){var s;switch(e){case"setPageSize":this.each(function(){s=$(this).data(i),s&&s.setPageSize(t)});break;case"setPageNumber":this.each(function(){s=$(this).data(i),s&&s.setPageNumber(t)});break;case"setTotalNumber":this.each(function(){s=$(this).data(i),s&&s.setTotalNumber(t)});break;case"getPageNumber":return this.data(i).getPageNumber();case"getTotalNumber":return this.data(i).getTotalNumber();case"destroy":this.each(function(){s=$(this).data(i),s&&(s.destroy(),$(this).data(i,null))});break;default:this.each(function(){!$(this).data(i)&&r(this)&&$(this).data(i,new n(this,e))})}return this}}),n}),n("dep/jquery.jstree",["require"],function(e){if($.jstree)return;var t=0,n=!1,r=!1,i=!1,s=[],o=$("script:last").attr("src"),u=window.document,a=u.createElement("LI"),f,l;a.setAttribute("role","treeitem"),f=u.createElement("I"),f.className="jstree-icon jstree-ocl",f.setAttribute("role","presentation"),a.appendChild(f),f=u.createElement("A"),f.className="jstree-anchor",f.setAttribute("href","#"),f.setAttribute("tabindex","-1"),l=u.createElement("I"),l.className="jstree-icon jstree-themeicon",l.setAttribute("role","presentation"),f.appendChild(l),a.appendChild(f),f=l=null,$.jstree={version:"3.1.1",defaults:{plugins:[]},plugins:{},path:o&&o.indexOf("/")!==-1?o.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g},$.jstree.create=function(e,n){var r=new $.jstree.core(++t),i=n;return n=$.extend(!0,{},$.jstree.defaults,n),i&&i.plugins&&(n.plugins=i.plugins),$.each(n.plugins,function(e,t){e!=="core"&&(r=r.plugin(t,n[t]))}),$(e).data("jstree",r),r.init(e,n),r},$.jstree.destroy=function(){$(".jstree:jstree").jstree("destroy"),$(u).off(".jstree")},$.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},$.jstree.reference=function(e){var t=null,n=null;e&&e.id&&(!e.tagName||!e.nodeType)&&(e=e.id);if(!n||!n.length)try{n=$(e)}catch(r){}if(!n||!n.length)try{n=$("#"+e.replace($.jstree.idregex,"\\$&"))}catch(r){}return n&&n.length&&(n=n.closest(".jstree")).length&&(n=n.data("jstree"))?t=n:$(".jstree").each(function(){var n=$(this).data("jstree");if(n&&n._model.data[e])return t=n,!1}),t},$.fn.jstree=function(e){var t=typeof e=="string",n=Array.prototype.slice.call(arguments,1),r=null;return e===!0&&!this.length?!1:(this.each(function(){var i=$.jstree.reference(this),s=t&&i?i[e]:null;r=t&&s?s.apply(i,n):null,!i&&!t&&(e===undefined||$.isPlainObject(e))&&$.jstree.create(this,e);if(i&&!t||e===!0)r=i||!1;if(r!==null&&r!==undefined)return!1}),r!==null&&r!==undefined?r:this)},$.expr[":"].jstree=$.expr.createPseudo(function(e){return function(e){return $(e).hasClass("jstree")&&$(e).data("jstree")!==undefined}}),$.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:$.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},$.jstree.core.prototype={plugin:function(e,t){var n=$.jstree.plugins[e];return n?(this._data[e]={},n.prototype=this,new n(t,this)):this},init:function(e,t){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=$(e).addClass("jstree jstree-"+this._id),this.settings=t,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl=this.element.css("direction")==="rtl",this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return this.nodeType===3&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><"+"a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(e){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(t){}e||this.element.empty(),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")}),this.element=null},bind:function(){var e="",t=null,n=0;this.element.on("dblclick.jstree",function(){if(u.selection&&u.selection.empty)u.selection.empty();else if(window.getSelection){var e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(t){}}}).on("mousedown.jstree",$.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),n=+(new Date))},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",$.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",$.proxy(function(e){this.settings.core.dblclick_toggle&&this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",$.proxy(function(e){e.preventDefault(),e.currentTarget!==u.activeElement&&$(e.currentTarget).focus(),this.activate_node(e.currentTarget,e)},this)).on("keydown.jstree",".jstree-anchor",$.proxy(function(e){if(e.target.tagName==="INPUT")return!0;if(e.which!==32&&e.which!==13&&(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey))return!0;var t=null;this._data.core.rtl&&(e.which===37?e.which=39:e.which===39&&(e.which=37));switch(e.which){case 32:e.ctrlKey&&(e.type="click",$(e.currentTarget).trigger(e));break;case 13:e.type="click",$(e.currentTarget).trigger(e);break;case 37:e.preventDefault(),this.is_open(e.currentTarget)?this.close_node(e.currentTarget):(t=this.get_parent(e.currentTarget),t&&t.id!=="#"&&this.get_node(t,!0).children(".jstree-anchor").focus());break;case 38:e.preventDefault(),t=this.get_prev_dom(e.currentTarget),t&&t.length&&t.children(".jstree-anchor").focus();break;case 39:e.preventDefault(),this.is_closed(e.currentTarget)?this.open_node(e.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(e.currentTarget)&&(t=this.get_node(e.currentTarget,!0).children(".jstree-children")[0],t&&$(this._firstChild(t)).children(".jstree-anchor").focus());break;case 40:e.preventDefault(),t=this.get_next_dom(e.currentTarget),t&&t.length&&t.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:e.preventDefault(),t=this._firstChild(this.get_container_ul()[0]),t&&$(t).children(".jstree-anchor").filter(":visible").focus();break;case 35:e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()}},this)).on("load_node.jstree",$.proxy(function(e,t){t.status&&(t.node.id==="#"&&!this._data.core.loaded&&(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout($.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){this._data.core.ready=!0;if(this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var e=[],t,n;for(t=0,n=this._data.core.selected.length;t<n;t++)e=e.concat(this._model.data[this._data.core.selected[t]].parents);e=$.vakata.array_unique(e);for(t=0,n=e.length;t<n;t++)this.open_node(e[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",$.proxy(function(n){if(n.target.tagName==="INPUT")return!0;t&&clearTimeout(t),t=setTimeout(function(){e=""},500);var r=String.fromCharCode(n.which).toLowerCase(),i=this.element.find(".jstree-anchor").filter(":visible"),s=i.index(u.activeElement)||0,o=!1;e+=r;if(e.length>1){i.slice(s).each($.proxy(function(t,n){if($(n).text().toLowerCase().indexOf(e)===0)return $(n).focus(),o=!0,!1},this));if(o)return;i.slice(0,s).each($.proxy(function(t,n){if($(n).text().toLowerCase().indexOf(e)===0)return $(n).focus(),o=!0,!1},this));if(o)return}if((new RegExp("^"+r+"+$")).test(e)){i.slice(s+1).each($.proxy(function(e,t){if($(t).text().toLowerCase().charAt(0)===r)return $(t).focus(),o=!0,!1},this));if(o)return;i.slice(0,s+1).each($.proxy(function(e,t){if($(t).text().toLowerCase().charAt(0)===r)return $(t).focus(),o=!0,!1},this));if(o)return}},this)).on("init.jstree",$.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",$.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",$.proxy(function(e){this._data.core.focused=null,$(e.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",$.proxy(function(e){var t=this.get_node(e.currentTarget);t&&t.id&&(this._data.core.focused=t.id),this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave(),$(e.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",$.proxy(function(){if(+(new Date)-n>500&&!this._data.core.focused){n=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",$.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",$.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),$(u).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(e){var t=this.settings.core.strings;return $.isFunction(t)?t.call(this,e):t&&t[e]?t[e]:e},_firstChild:function(e){e=e?e.firstChild:null;while(e!==null&&e.nodeType!==1)e=e.nextSibling;return e},_nextSibling:function(e){e=e?e.nextSibling:null;while(e!==null&&e.nodeType!==1)e=e.nextSibling;return e},_previousSibling:function(e){e=e?e.previousSibling:null;while(e!==null&&e.nodeType!==1)e=e.previousSibling;return e},get_node:function(e,t){e&&e.id&&(e=e.id);var n;try{if(this._model.data[e])e=this._model.data[e];else if(typeof e=="string"&&this._model.data[e.replace(/^#/,"")])e=this._model.data[e.replace(/^#/,"")];else if(typeof e=="string"&&(n=$("#"+e.replace($.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])e=this._model.data[n.closest(".jstree-node").attr("id")];else if((n=$(e,this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])e=this._model.data[n.closest(".jstree-node").attr("id")];else{if(!(n=$(e,this.element)).length||!n.hasClass("jstree"))return!1;e=this._model.data["#"]}return t&&(e=e.id==="#"?this.element:$("#"+e.id.replace($.jstree.idregex,"\\$&"),this.element)),e}catch(r){return!1}},get_path:function(e,t,n){e=e.parents?e:this.get_node(e);if(!e||e.id==="#"||!e.parents)return!1;var r,i,s=[];s.push(n?e.id:e.text);for(r=0,i=e.parents.length;r<i;r++)s.push(n?e.parents[r]:this.get_text(e.parents[r]));return s=s.reverse().slice(1),t?s.join(t):s},get_next_dom:function(e,t){var n;e=this.get_node(e,!0);if(e[0]===this.element[0]){n=this._firstChild(this.get_container_ul()[0]);while(n&&n.offsetHeight===0)n=this._nextSibling(n);return n?$(n):!1}if(!e||!e.length)return!1;if(t){n=e[0];do n=this._nextSibling(n);while(n&&n.offsetHeight===0);return n?$(n):!1}if(e.hasClass("jstree-open")){n=this._firstChild(e.children(".jstree-children")[0]);while(n&&n.offsetHeight===0)n=this._nextSibling(n);if(n!==null)return $(n)}n=e[0];do n=this._nextSibling(n);while(n&&n.offsetHeight===0);return n!==null?$(n):e.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(e,t){var n;e=this.get_node(e,!0);if(e[0]===this.element[0]){n=this.get_container_ul()[0].lastChild;while(n&&n.offsetHeight===0)n=this._previousSibling(n);return n?$(n):!1}if(!e||!e.length)return!1;if(t){n=e[0];do n=this._previousSibling(n);while(n&&n.offsetHeight===0);return n?$(n):!1}n=e[0];do n=this._previousSibling(n);while(n&&n.offsetHeight===0);if(n!==null){e=$(n);while(e.hasClass("jstree-open"))e=e.children(".jstree-children").first().children(".jstree-node:visible:last");return e}return n=e[0].parentNode.parentNode,n&&n.className&&n.className.indexOf("jstree-node")!==-1?$(n):!1},get_parent:function(e){return e=this.get_node(e),!e||e.id==="#"?!1:e.parent},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!e||!e.length?!1:e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return e=this.get_node(e),e&&(e.state.loaded===!1||e.children.length>0)},is_loaded:function(e){return e=this.get_node(e),e&&e.state.loaded},is_loading:function(e){return e=this.get_node(e),e&&e.state&&e.state.loading},is_open:function(e){return e=this.get_node(e),e&&e.state.opened},is_closed:function(e){return e=this.get_node(e),e&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(e,t){var n,r,i,s,o;if($.isArray(e))return this._load_nodes(e.slice(),t),!0;e=this.get_node(e);if(!e)return t&&t.call(this,e,!1),!1;if(e.state.loaded){e.state.loaded=!1;for(n=0,r=e.children_d.length;n<r;n++){for(i=0,s=e.parents.length;i<s;i++)this._model.data[e.parents[i]].children_d=$.vakata.array_remove_item(this._model.data[e.parents[i]].children_d,e.children_d[n]);this._model.data[e.children_d[n]].state.selected&&(o=!0,this._data.core.selected=$.vakata.array_remove_item(this._data.core.selected,e.children_d[n])),delete this._model.data[e.children_d[n]]}e.children=[],e.children_d=[],o&&this.trigger("changed",{action:"load_node",node:e,selected:this._data.core.selected})}return e.state.failed=!1,e.state.loading=!0,this.get_node(e,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(e,$.proxy(function(n){e=this._model.data[e.id],e.state.loading=!1,e.state.loaded=n,e.state.failed=!e.state.loaded;var r=this.get_node(e,!0);e.state.loaded&&!e.children.length&&r&&r.length&&!r.hasClass("jstree-leaf")&&r.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),r.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:e,status:n}),t&&t.call(this,e,n)},this)),!0},_load_nodes:function(e,t,n){var r=!0,i=function(){this._load_nodes(e,t,!0)},s=this._model.data,o,u,a=[];for(o=0,u=e.length;o<u;o++)s[e[o]]&&(!s[e[o]].state.loaded&&!s[e[o]].state.failed||!n)&&(this.is_loading(e[o])||this.load_node(e[o],i),r=!1);if(r){for(o=0,u=e.length;o<u;o++)s[e[o]]&&s[e[o]].state.loaded&&a.push(e[o]);t&&!t.done&&(t.call(this,a),t.done=!0)}},load_all:function(e,t){e||(e="#"),e=this.get_node(e);if(!e)return!1;var n=[],r=this._model.data,i=r[e.id].children_d,s,o;e.state&&!e.state.loaded&&n.push(e.id);for(s=0,o=i.length;s<o;s++)r[i[s]]&&r[i[s]].state&&!r[i[s]].state.loaded&&n.push(i[s]);n.length?this._load_nodes(n,function(){this.load_all(e,t)}):(t&&t.call(this,e),this.trigger("load_all",{node:e}))},_load_node:function(e,t){var n=this.settings.core.data,r;return n?$.isFunction(n)?n.call(this,e,$.proxy(function(n){n===!1&&t.call(this,!1),this[typeof n=="string"?"_append_html_data":"_append_json_data"](e,typeof n=="string"?$($.parseHTML(n)).filter(function(){return this.nodeType!==3}):n,function(e){t.call(this,e)})},this)):typeof n=="object"?n.url?(n=$.extend(!0,{},n),$.isFunction(n.url)&&(n.url=n.url.call(this,e)),$.isFunction(n.data)&&(n.data=n.data.call(this,e)),$.ajax(n).done($.proxy(function(n,r,i){var s=i.getResponseHeader("Content-Type");return s&&s.indexOf("json")!==-1||typeof n=="object"?this._append_json_data(e,n,function(e){t.call(this,e)}):s&&s.indexOf("html")!==-1||typeof n=="string"?this._append_html_data(e,$($.parseHTML(n)).filter(function(){return this.nodeType!==3}),function(e){t.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:e.id,xhr:i})},this.settings.core.error.call(this,this._data.core.last_error),t.call(this,!1))},this)).fail($.proxy(function(n){t.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:e.id,xhr:n})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(r=$.isArray(n)||$.isPlainObject(n)?JSON.parse(JSON.stringify(n)):n,e.id==="#"?this._append_json_data(e,r,function(e){t.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:e.id})},this.settings.core.error.call(this,this._data.core.last_error),t.call(this,!1))):typeof n=="string"?e.id==="#"?this._append_html_data(e,$($.parseHTML(n)).filter(function(){return this.nodeType!==3}),function(e){t.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:e.id})},this.settings.core.error.call(this,this._data.core.last_error),t.call(this,!1)):t.call(this,!1):e.id==="#"?this._append_html_data(e,this._data.core.original_container_html.clone(!0),function(e){t.call(this,e)}):t.call(this,!1)},_node_changed:function(e){e=this.get_node(e),e&&this._model.changed.push(e.id)},_append_html_data:function(e,t,n){e=this.get_node(e),e.children=[],e.children_d=[];var r=t.is("ul")?t.children():t,i=e.id,s=[],o=[],u=this._model.data,a=u[i],f=this._data.core.selected.length,l,c,h;r.each($.proxy(function(e,t){l=this._parse_model_from_html($(t),i,a.parents.concat()),l&&(s.push(l),o.push(l),u[l].children_d.length&&(o=o.concat(u[l].children_d)))},this)),a.children=s,a.children_d=o;for(c=0,h=a.parents.length;c<h;c++)u[a.parents[c]].children_d=u[a.parents[c]].children_d.concat(o);this.trigger("model",{nodes:o,parent:i}),i!=="#"?(this._node_changed(i),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==f&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)},_append_json_data:function(e,t,n,r){if(this.element===null)return;e=this.get_node(e),e.children=[],e.children_d=[],t.d&&(t=t.d,typeof t=="string"&&(t=JSON.parse(t))),$.isArray(t)||(t=[t]);var i=null,s={df:this._model.default_state,dat:t,par:e.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},o=function(e,t){e.data&&(e=e.data);var n=e.dat,r=e.par,i=[],s=[],o=[],u=e.df,a=e.t_id,f=e.t_cnt,l=e.m,c=l[r],h=e.sel,p,d,v,m,g=function(e,n,r){r?r=r.concat():r=[],n&&r.unshift(n);var i=e.id.toString(),s,a,f,c,h={id:i,text:e.text||"",icon:e.icon!==t?e.icon:!0,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in u)u.hasOwnProperty(s)&&(h.state[s]=u[s]);e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(h.icon=e.data.jstree.icon);if(h.icon===t||h.icon===null||h.icon==="")h.icon=!0;if(e&&e.data){h.data=e.data;if(e.data.jstree)for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(h.state[s]=e.data.jstree[s])}if(e&&typeof e.state=="object")for(s in e.state)e.state.hasOwnProperty(s)&&(h.state[s]=e.state[s]);if(e&&typeof e.li_attr=="object")for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(h.li_attr[s]=e.li_attr[s]);h.li_attr.id||(h.li_attr.id=i);if(e&&typeof e.a_attr=="object")for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(h.a_attr[s]=e.a_attr[s]);e&&e.children&&e.children===!0&&(h.state.loaded=!1,h.children=[],h.children_d=[]),l[h.id]=h;for(s=0,a=h.children.length;s<a;s++)f=g(l[h.children[s]],h.id,r),c=l[f],h.children_d.push(f),c.children_d.length&&(h.children_d=h.children_d.concat(c.children_d));return delete e.data,delete e.children,l[h.id].original=e,h.state.selected&&o.push(h.id),h.id},y=function(e,n,r){r?r=r.concat():r=[],n&&r.unshift(n);var i=!1,s,c,h,p,d;do i="j"+a+"_"+ ++f;while(l[i]);d={id:!1,text:typeof e=="string"?e:"",icon:typeof e=="object"&&e.icon!==t?e.icon:!0,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in u)u.hasOwnProperty(s)&&(d.state[s]=u[s]);e&&e.id&&(d.id=e.id.toString()),e&&e.text&&(d.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon);if(d.icon===t||d.icon===null||d.icon==="")d.icon=!0;if(e&&e.data){d.data=e.data;if(e.data.jstree)for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(d.state[s]=e.data.jstree[s])}if(e&&typeof e.state=="object")for(s in e.state)e.state.hasOwnProperty(s)&&(d.state[s]=e.state[s]);if(e&&typeof e.li_attr=="object")for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(d.li_attr[s]=e.li_attr[s]);d.li_attr.id&&!d.id&&(d.id=d.li_attr.id.toString()),d.id||(d.id=i),d.li_attr.id||(d.li_attr.id=d.id);if(e&&typeof e.a_attr=="object")for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(d.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,c=e.children.length;s<c;s++)h=y(e.children[s],d.id,r),p=l[h],d.children.push(h),p.children_d.length&&(d.children_d=d.children_d.concat(p.children_d));d.children_d=d.children_d.concat(d.children)}return e&&e.children&&e.children===!0&&(d.state.loaded=!1,d.children=[],d.children_d=[]),delete e.data,delete e.children,d.original=e,l[d.id]=d,d.state.selected&&o.push(d.id),d.id};if(n.length&&n[0].id!==t&&n[0].parent!==t){for(d=0,v=n.length;d<v;d++)n[d].children||(n[d].children=[]),l[n[d].id.toString()]=n[d];for(d=0,v=n.length;d<v;d++)l[n[d].parent.toString()].children.push(n[d].id.toString()),c.children_d.push(n[d].id.toString());for(d=0,v=c.children.length;d<v;d++)p=g(l[c.children[d]],r,c.parents.concat()),s.push(p),l[p].children_d.length&&(s=s.concat(l[p].children_d));for(d=0,v=c.parents.length;d<v;d++)l[c.parents[d]].children_d=l[c.parents[d]].children_d.concat(s);m={cnt:f,mod:l,sel:h,par:r,dpc:s,add:o}}else{for(d=0,v=n.length;d<v;d++)p=y(n[d],r,c.parents.concat()),p&&(i.push(p),s.push(p),l[p].children_d.length&&(s=s.concat(l[p].children_d)));c.children=i,c.children_d=s;for(d=0,v=c.parents.length;d<v;d++)l[c.parents[d]].children_d=l[c.parents[d]].children_d.concat(s);m={cnt:f,mod:l,sel:h,par:r,dpc:s,add:o}}if(typeof window!="undefined"&&typeof window.document!="undefined")return m;postMessage(m)},u=function(e,t){if(this.element===null)return;this._cnt=e.cnt,this._model.data=e.mod;if(t){var r,i,s=e.add,o=e.sel,u=this._data.core.selected.slice(),a=this._model.data;if(o.length!==u.length||$.vakata.array_unique(o.concat(u)).length!==o.length){for(r=0,i=o.length;r<i;r++)$.inArray(o[r],s)===-1&&$.inArray(o[r],u)===-1&&(a[o[r]].state.selected=!1);for(r=0,i=u.length;r<i;r++)$.inArray(u[r],o)===-1&&(a[u[r]].state.selected=!0)}}e.add.length&&(this._data.core.selected=this._data.core.selected.concat(e.add)),this.trigger("model",{nodes:e.dpc,parent:e.par}),e.par!=="#"?(this._node_changed(e.par),this.redraw()):this.redraw(!0),e.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{this._wrk===null&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+o.toString()],{type:"text/javascript"}))),!this._data.core.working||r?(this._data.core.working=!0,i=new window.Worker(this._wrk),i.onmessage=$.proxy(function(e){u.call(this,e.data,!0);try{i.terminate(),i=null}catch(t){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),s.par?i.postMessage(s):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([e,t,n,!0])}catch(a){u.call(this,o(s),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else u.call(this,o(s),!1)},_parse_model_from_html:function(e,t,n){n?n=[].concat(n):n=[],t&&n.unshift(t);var r,i,s=this._model.data,o={id:!1,text:!1,icon:!0,parent:t,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},u,a,f;for(u in this._model.default_state)this._model.default_state.hasOwnProperty(u)&&(o.state[u]=this._model.default_state[u]);a=$.vakata.attributes(e,!0),$.each(a,function(e,t){t=$.trim(t);if(!t.length)return!0;o.li_attr[e]=t,e==="id"&&(o.id=t.toString())}),a=e.children("a").first(),a.length&&(a=$.vakata.attributes(a,!0),$.each(a,function(e,t){t=$.trim(t),t.length&&(o.a_attr[e]=t)})),a=e.children("a").first().length?e.children("a").first().clone():e.clone(),a.children("ins, i, ul").remove(),a=a.html(),a=$("<div />").html(a),o.text=this.settings.core.force_text?a.text():a.html(),a=e.data(),o.data=a?$.extend(!0,{},a):null,o.state.opened=e.hasClass("jstree-open"),o.state.selected=e.children("a").hasClass("jstree-clicked"),o.state.disabled=e.children("a").hasClass("jstree-disabled");if(o.data&&o.data.jstree)for(u in o.data.jstree)o.data.jstree.hasOwnProperty(u)&&(o.state[u]=o.data.jstree[u]);a=e.children("a").children(".jstree-themeicon"),a.length&&(o.icon=a.hasClass("jstree-themeicon-hidden")?!1:a.attr("rel")),o.state.icon!==undefined&&(o.icon=o.state.icon);if(o.icon===undefined||o.icon===null||o.icon==="")o.icon=!0;a=e.children("ul").children("li");do f="j"+this._id+"_"+ ++this._cnt;while(s[f]);return o.id=o.li_attr.id?o.li_attr.id.toString():f,a.length?(a.each($.proxy(function(e,t){r=this._parse_model_from_html($(t),o.id,n),i=this._model.data[r],o.children.push(r),i.children_d.length&&(o.children_d=o.children_d.concat(i.children_d))},this)),o.children_d=o.children_d.concat(o.children)):e.hasClass("jstree-closed")&&(o.state.loaded=!1),o.li_attr["class"]&&(o.li_attr["class"]=o.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),o.a_attr["class"]&&(o.a_attr["class"]=o.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),s[o.id]=o,o.state.selected&&this._data.core.selected.push(o.id),o.id},_parse_model_from_flat_json:function(e,t,n){n?n=n.concat():n=[],t&&n.unshift(t);var r=e.id.toString(),i=this._model.data,s=this._model.default_state,o,u,a,f,l={id:r,text:e.text||"",icon:e.icon!==undefined?e.icon:!0,parent:t,parents:n,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in s)s.hasOwnProperty(o)&&(l.state[o]=s[o]);e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon);if(l.icon===undefined||l.icon===null||l.icon==="")l.icon=!0;if(e&&e.data){l.data=e.data;if(e.data.jstree)for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(l.state[o]=e.data.jstree[o])}if(e&&typeof e.state=="object")for(o in e.state)e.state.hasOwnProperty(o)&&(l.state[o]=e.state[o]);if(e&&typeof e.li_attr=="object")for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(l.li_attr[o]=e.li_attr[o]);l.li_attr.id||(l.li_attr.id=r);if(e&&typeof e.a_attr=="object")for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(l.a_attr[o]=e.a_attr[o]);e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),i[l.id]=l;for(o=0,u=l.children.length;o<u;o++)a=this._parse_model_from_flat_json(i[l.children[o]],l.id,n),f=i[a],l.children_d.push(a),f.children_d.length&&(l.children_d=l.children_d.concat(f.children_d));return delete e.data,delete e.children,i[l.id].original=e,l.state.selected&&this._data.core.selected.push(l.id),l.id},_parse_model_from_json:function(e,t,n){n?n=n.concat():n=[],t&&n.unshift(t);var r=!1,i,s,o,u,a=this._model.data,f=this._model.default_state,l;do r="j"+this._id+"_"+ ++this._cnt;while(a[r]);l={id:!1,text:typeof e=="string"?e:"",icon:typeof e=="object"&&e.icon!==undefined?e.icon:!0,parent:t,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in f)f.hasOwnProperty(i)&&(l.state[i]=f[i]);e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon);if(l.icon===undefined||l.icon===null||l.icon==="")l.icon=!0;if(e&&e.data){l.data=e.data;if(e.data.jstree)for(i in e.data.jstree)e.data.jstree.hasOwnProperty(i)&&(l.state[i]=e.data.jstree[i])}if(e&&typeof e.state=="object")for(i in e.state)e.state.hasOwnProperty(i)&&(l.state[i]=e.state[i]);if(e&&typeof e.li_attr=="object")for(i in e.li_attr)e.li_attr.hasOwnProperty(i)&&(l.li_attr[i]=e.li_attr[i]);l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=r),l.li_attr.id||(l.li_attr.id=l.id);if(e&&typeof e.a_attr=="object")for(i in e.a_attr)e.a_attr.hasOwnProperty(i)&&(l.a_attr[i]=e.a_attr[i]);if(e&&e.children&&e.children.length){for(i=0,s=e.children.length;i<s;i++)o=this._parse_model_from_json(e.children[i],l.id,n),u=a[o],l.children.push(o),u.children_d.length&&(l.children_d=l.children_d.concat(u.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,a[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var e=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),t=u.createElement("UL"),n,r,i,s=this._data.core.focused;for(r=0,i=e.length;r<i;r++)n=this.redraw_node(e[r],!0,this._model.force_full_redraw),n&&this._model.force_full_redraw&&t.appendChild(n);this._model.force_full_redraw&&(t.className=this.get_container_ul()[0].className,t.setAttribute("role","group"),this.element.empty().append(t)),s!==null&&(n=this.get_node(s,!0),n&&n.length&&n.children(".jstree-anchor")[0]!==u.activeElement?n.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:e})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(e){var t=this.get_node(e),n=!1,r=!1,i=!1,s=u;if(!t)return!1;if(t.id==="#")return this.redraw(!0);e=this.get_node(e,!0);if(!e||!e.length)return!1;e.children(".jstree-children").remove(),e=e[0];if(t.children.length&&t.state.loaded){i=s.createElement("UL"),i.setAttribute("role","group"),i.className="jstree-children";for(n=0,r=t.children.length;n<r;n++)i.appendChild(this.redraw_node(t.children[n],!0,!0));e.appendChild(i)}},redraw_node:function(e,t,n,r){var i=this.get_node(e),s=!1,o=!1,f=!1,l=!1,c=!1,h=!1,p="",d=u,v=this._model.data,m=!1,g=!1,y=null,b=0,w=0;if(!i)return!1;if(i.id==="#")return this.redraw(!0);t=t||i.children.length===0,e=u.querySelector?this.element[0].querySelector("#"+("0123456789".indexOf(i.id[0])!==-1?"\\3"+i.id[0]+" "+i.id.substr(1).replace($.jstree.idregex,"\\$&"):i.id.replace($.jstree.idregex,"\\$&"))):u.getElementById(i.id);if(!e){t=!0;if(!n){s=i.parent!=="#"?$("#"+i.parent.replace($.jstree.idregex,"\\$&"),this.element)[0]:null;if(s!==null&&(!s||!v[i.parent].state.opened))return!1;o=$.inArray(i.id,s===null?v["#"].children:v[i.parent].children)}}else e=$(e),n||(s=e.parent().parent()[0],s===this.element[0]&&(s=null),o=e.index()),!t&&i.children.length&&!e.children(".jstree-children").length&&(t=!0),t||(f=e.children(".jstree-children")[0]),m=e.children(".jstree-anchor")[0]===u.activeElement,e.remove();e=a.cloneNode(!0),p="jstree-node ";for(l in i.li_attr)if(i.li_attr.hasOwnProperty(l)){if(l==="id")continue;l!=="class"?e.setAttribute(l,i.li_attr[l]):p+=i.li_attr[l]}i.a_attr.id||(i.a_attr.id=i.id+"_anchor"),e.setAttribute("aria-selected",!!i.state.selected),e.setAttribute("aria-level",i.parents.length),e.setAttribute("aria-labelledby",i.a_attr.id),i.state.disabled&&e.setAttribute("aria-disabled",!0),i.state.loaded&&!i.children.length?p+=" jstree-leaf":(p+=i.state.opened&&i.state.loaded?" jstree-open":" jstree-closed",e.setAttribute("aria-expanded",i.state.opened&&i.state.loaded)),i.parent!==null&&v[i.parent].children[v[i.parent].children.length-1]===i.id&&(p+=" jstree-last"),e.id=i.id,e.className=p,p=(i.state.selected?" jstree-clicked":"")+(i.state.disabled?" jstree-disabled":"");for(c in i.a_attr)if(i.a_attr.hasOwnProperty(c)){if(c==="href"&&i.a_attr[c]==="#")continue;c!=="class"?e.childNodes[1].setAttribute(c,i.a_attr[c]):p+=" "+i.a_attr[c]}p.length&&(e.childNodes[1].className="jstree-anchor "+p);if(i.icon&&i.icon!==!0||i.icon===!1)i.icon===!1?e.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":i.icon.indexOf("/")===-1&&i.icon.indexOf(".")===-1?e.childNodes[1].childNodes[0].className+=" "+i.icon+" jstree-themeicon-custom":(e.childNodes[1].childNodes[0].style.backgroundImage="url("+i.icon+")",e.childNodes[1].childNodes[0].style.backgroundPosition="center center",e.childNodes[1].childNodes[0].style.backgroundSize="auto",e.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom");this.settings.core.force_text?e.childNodes[1].appendChild(d.createTextNode(i.text)):e.childNodes[1].innerHTML+=i.text;if(t&&i.children.length&&(i.state.opened||r)&&i.state.loaded){h=d.createElement("UL"),h.setAttribute("role","group"),h.className="jstree-children";for(l=0,c=i.children.length;l<c;l++)h.appendChild(this.redraw_node(i.children[l],t,!0));e.appendChild(h)}f&&e.appendChild(f);if(!n){s||(s=this.element[0]);for(l=0,c=s.childNodes.length;l<c;l++)if(s.childNodes[l]&&s.childNodes[l].className&&s.childNodes[l].className.indexOf("jstree-children")!==-1){y=s.childNodes[l];break}y||(y=d.createElement("UL"),y.setAttribute("role","group"),y.className="jstree-children",s.appendChild(y)),s=y,o<s.childNodes.length?s.insertBefore(e,s.childNodes[o]):s.appendChild(e),m&&(b=this.element[0].scrollTop,w=this.element[0].scrollLeft,e.childNodes[1].focus(),this.element[0].scrollTop=b,this.element[0].scrollLeft=w)}return i.state.opened&&!i.state.loaded&&(i.state.opened=!1,setTimeout($.proxy(function(){this.open_node(i.id,!1,0)},this),0)),e},open_node:function(e,t,n){var r,i,s,o;if($.isArray(e)){e=e.slice();for(r=0,i=e.length;r<i;r++)this.open_node(e[r],t,n);return!0}e=this.get_node(e);if(!e||e.id==="#")return!1;n=n===undefined?this.settings.core.animation:n;if(!this.is_closed(e))return t&&t.call(this,e,!1),!1;if(!this.is_loaded(e)){if(this.is_loading(e))return setTimeout($.proxy(function(){this.open_node(e,t,n)},this),500);this.load_node(e,function(e,r){return r?this.open_node(e,t,n):t?t.call(this,e,!1):!1})}else s=this.get_node(e,!0),o=this,s.length&&(n&&s.children(".jstree-children").length&&s.children(".jstree-children").stop(!0,!0),e.children.length&&!this._firstChild(s.children(".jstree-children")[0])&&this.draw_children(e),n?(this.trigger("before_open",{node:e}),s.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(n,function(){this.style.display="",o.trigger("after_open",{node:e})})):(this.trigger("before_open",{node:e}),s[0].className=s[0].className.replace("jstree-closed","jstree-open"),s[0].setAttribute("aria-expanded",!0))),e.state.opened=!0,t&&t.call(this,e,!0),s.length||this.trigger("before_open",{node:e}),this.trigger("open_node",{node:e}),(!n||!s.length)&&this.trigger("after_open",{node:e})},_open_to:function(e){e=this.get_node(e);if(!e||e.id==="#")return!1;var t,n,r=e.parents;for(t=0,n=r.length;t<n;t+=1)t!=="#"&&this.open_node(r[t],!1,0);return $("#"+e.id.replace($.jstree.idregex,"\\$&"),this.element)},close_node:function(e,t){var n,r,i,s;if($.isArray(e)){e=e.slice();for(n=0,r=e.length;n<r;n++)this.close_node(e[n],t);return!0}e=this.get_node(e);if(!e||e.id==="#")return!1;if(this.is_closed(e))return!1;t=t===undefined?this.settings.core.animation:t,i=this,s=this.get_node(e,!0),s.length&&(t?s.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(t,function(){this.style.display="",s.children(".jstree-children").remove(),i.trigger("after_close",{node:e})}):(s[0].className=s[0].className.replace("jstree-open","jstree-closed"),s.attr("aria-expanded",!1).children(".jstree-children").remove())),e.state.opened=!1,this.trigger("close_node",{node:e}),(!t||!s.length)&&this.trigger("after_close",{node:e})},toggle_node:function(e){var t,n;if($.isArray(e)){e=e.slice();for(t=0,n=e.length;t<n;t++)this.toggle_node(e[t]);return!0}if(this.is_closed(e))return this.open_node(e);if(this.is_open(e))return this.close_node(e)},open_all:function(e,t,n){e||(e="#"),e=this.get_node(e);if(!e)return!1;var r=e.id==="#"?this.get_container_ul():this.get_node(e,!0),i,s,o;if(!r.length){for(i=0,s=e.children_d.length;i<s;i++)this.is_closed(this._model.data[e.children_d[i]])&&(this._model.data[e.children_d[i]].state.opened=!0);return this.trigger("open_all",{node:e})}n=n||r,o=this,r=this.is_closed(e)?r.find(".jstree-closed").addBack():r.find(".jstree-closed"),r.each(function(){o.open_node(this,function(e,r){r&&this.is_parent(e)&&this.open_all(e,t,n)},t||0)}),n.find(".jstree-closed").length===0&&this.trigger("open_all",{node:this.get_node(n)})},close_all:function(e,t){e||(e="#"),e=this.get_node(e);if(!e)return!1;var n=e.id==="#"?this.get_container_ul():this.get_node(e,!0),r=this,i,s;if(!n.length){for(i=0,s=e.children_d.length;i<s;i++)this._model.data[e.children_d[i]].state.opened=!1;return this.trigger("close_all",{node:e})}n=this.is_open(e)?n.find(".jstree-open").addBack():n.find(".jstree-open"),$(n.get().reverse()).each(function(){r.close_node(this,t||0)}),this.trigger("close_all",{node:e})},is_disabled:function(e){return e=this.get_node(e),e&&e.state&&e.state.disabled},enable_node:function(e){var t,n;if($.isArray(e)){e=e.slice();for(t=0,n=e.length;t<n;t++)this.enable_node(e[t]);return!0}e=this.get_node(e);if(!e||e.id==="#")return!1;e.state.disabled=!1,this.get_node(e,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:e})},disable_node:function(e){var t,n;if($.isArray(e)){e=e.slice();for(t=0,n=e.length;t<n;t++)this.disable_node(e[t]);return!0}e=this.get_node(e);if(!e||e.id==="#")return!1;e.state.disabled=!0,this.get_node(e,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:e})},activate_node:function(e,t){if(this.is_disabled(e))return!1;this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==undefined?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1]));if(!this.settings.core.multiple||!t.metaKey&&!t.ctrlKey&&!t.shiftKey||t.shiftKey&&(!this._data.core.last_clicked||!this.get_parent(e)||this.get_parent(e)!==this._data.core.last_clicked.parent))!this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,t):(this.deselect_all(!0),this.select_node(e,!1,!1,t),this._data.core.last_clicked=this.get_node(e));else if(t.shiftKey){var n=this.get_node(e).id,r=this._data.core.last_clicked.id,i=this.get_node(this._data.core.last_clicked.parent).children,s=!1,o,u;for(o=0,u=i.length;o<u;o+=1)i[o]===n&&(s=!s),i[o]===r&&(s=!s),!this.is_disabled(i[o])&&(s||i[o]===n||i[o]===r)?this.select_node(i[o],!0,!1,t):this.deselect_node(i[o],!0,t);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:t})}else this.is_selected(e)?this.deselect_node(e,!1,t):this.select_node(e,!1,!1,t);this.trigger("activate_node",{node:this.get_node(e)})},hover_node:function(e){e=this.get_node(e,!0);if(!e||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),n=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){n.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){e=this.get_node(e,!0);if(!e||!e.length||!e.children(".jstree-hovered").length)return!1;e.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(e,t,n,r){var i,s,o,u;if($.isArray(e)){e=e.slice();for(s=0,o=e.length;s<o;s++)this.select_node(e[s],t,n,r);return!0}e=this.get_node(e);if(!e||e.id==="#")return!1;i=this.get_node(e,!0),e.state.selected||(e.state.selected=!0,this._data.core.selected.push(e.id),n||(i=this._open_to(e)),i&&i.length&&i.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:e,selected:this._data.core.selected,event:r}),t||this.trigger("changed",{action:"select_node",node:e,selected:this._data.core.selected,event:r}))},deselect_node:function(e,t,n){var r,i,s;if($.isArray(e)){e=e.slice();for(r=0,i=e.length;r<i;r++)this.deselect_node(e[r],t,n);return!0}e=this.get_node(e);if(!e||e.id==="#")return!1;s=this.get_node(e,!0),e.state.selected&&(e.state.selected=!1,this._data.core.selected=$.vakata.array_remove_item(this._data.core.selected,e.id),s.length&&s.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:e,selected:this._data.core.selected,event:n}),t||this.trigger("changed",{action:"deselect_node",node:e,selected:this._data.core.selected,event:n}))},select_all:function(e){var t=this._data.core.selected.concat([]),n,r;this._data.core.selected=this._model.data["#"].children_d.concat();for(n=0,r=this._data.core.selected.length;n<r;n++)this._model.data[this._data.core.selected[n]]&&(this._model.data[this._data.core.selected[n]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:t})},deselect_all:function(e){var t=this._data.core.selected.concat([]),n,r;for(n=0,r=this._data.core.selected.length;n<r;n++)this._model.data[this._data.core.selected[n]]&&(this._model.data[this._data.core.selected[n]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:t}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:t})},is_selected:function(e){return e=this.get_node(e),!e||e.id==="#"?!1:e.state.selected},get_selected:function(e){return e?$.map(this._data.core.selected,$.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(e){var t=this.get_selected(!0),n={},r,i,s,o;for(r=0,i=t.length;r<i;r++)n[t[r].id]=t[r];for(r=0,i=t.length;r<i;r++)for(s=0,o=t[r].children_d.length;s<o;s++)n[t[r].children_d[s]]&&delete n[t[r].children_d[s]];t=[];for(r in n)n.hasOwnProperty(r)&&t.push(r);return e?$.map(t,$.proxy(function(e){return this.get_node(e)},this)):t},get_bottom_selected:function(e){var t=this.get_selected(!0),n=[],r,i;for(r=0,i=t.length;r<i;r++)t[r].children.length||n.push(t[r].id);return e?$.map(n,$.proxy(function(e){return this.get_node(e)},this)):n},get_state:function(){var e={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}},t;for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!=="#"&&(this._model.data[t].state.opened&&e.core.open.push(t),this._model.data[t].state.selected&&e.core.selected.push(t));return e},set_state:function(e,t){if(e){if(e.core){var n,r,i,s,o;if(e.core.open)return!$.isArray(e.core.open)||!e.core.open.length?(delete e.core.open,this.set_state(e,t)):this._load_nodes(e.core.open,function(n){this.open_node(n,!1,0),delete e.core.open,this.set_state(e,t)},!0),!1;if(e.core.scroll)return e.core.scroll&&e.core.scroll.left!==undefined&&this.element.scrollLeft(e.core.scroll.left),e.core.scroll&&e.core.scroll.top!==undefined&&this.element.scrollTop(e.core.scroll.top),delete e.core.scroll,this.set_state(e,t),!1;if(e.core.selected)return s=this,this.deselect_all(),$.each(e.core.selected,function(e,t){s.select_node(t,!1,!0)}),delete e.core.selected,this.set_state(e,t),!1;for(o in e)e.hasOwnProperty(o)&&o!=="core"&&$.inArray(o,this.settings.plugins)===-1&&delete e[o];if($.isEmptyObject(e.core))return delete e.core,this.set_state(e,t),!1}return $.isEmptyObject(e)?(e=null,t&&t.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(e,t){this._data.core.state=t===!0?{}:this.get_state(),t&&$.isFunction(t)&&(this._data.core.state=t.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var n=this.get_container_ul()[0].className;e||(this.element.html("<ul class='"+n+"' role='group'><"+"li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><"+"a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node("#",function(e,t){t&&(this.get_container_ul()[0].className=n,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state($.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(e){e=this.get_node(e);if(!e||e.id==="#")return!1;var t=[],n=[],r=this._data.core.selected.concat([]);n.push(e.id),e.state.opened===!0&&t.push(e.id),this.get_node(e,!0).find(".jstree-open").each(function(){t.push(this.id)}),this._load_nodes(n,$.proxy(function(n){this.open_node(t,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:e,nodes:n})},this))},set_id:function(e,t){e=this.get_node(e);if(!e||e.id==="#")return!1;var n,r,i=this._model.data;t=t.toString(),i[e.parent].children[$.inArray(e.id,i[e.parent].children)]=t;for(n=0,r=e.parents.length;n<r;n++)i[e.parents[n]].children_d[$.inArray(e.id,i[e.parents[n]].children_d)]=t;for(n=0,r=e.children.length;n<r;n++)i[e.children[n]].parent=t;for(n=0,r=e.children_d.length;n<r;n++)i[e.children_d[n]].parents[$.inArray(e.id,i[e.children_d[n]].parents)]=t;return n=$.inArray(e.id,this._data.core.selected),n!==-1&&(this._data.core.selected[n]=t),n=this.get_node(e.id,!0),n&&(n.attr("id",t).children(".jstree-anchor").attr("id",t+"_anchor").end().attr("aria-labelledby",t+"_anchor"),this.element.attr("aria-activedescendant")===e.id&&this.element.attr("aria-activedescendant",t)),delete i[e.id],e.id=t,e.li_attr.id=t,i[t]=e,!0},get_text:function(e){return e=this.get_node(e),!e||e.id==="#"?!1:e.text},set_text:function(e,t){var n,r;if($.isArray(e)){e=e.slice();for(n=0,r=e.length;n<r;n++)this.set_text(e[n],t);return!0}return e=this.get_node(e),!e||e.id==="#"?!1:(e.text=t,this.get_node(e,!0).length&&this.redraw_node(e.id),this.trigger("set_text",{obj:e,text:t}),!0)},get_json:function(e,t,n){e=this.get_node(e||"#");if(!e)return!1;t&&t.flat&&!n&&(n=[]);var r={id:e.id,text:e.text,icon:this.get_icon(e),li_attr:$.extend(!0,{},e.li_attr),a_attr:$.extend(!0,{},e.a_attr),state:{},data:t&&t.no_data?!1:$.extend(!0,{},e.data)},i,s;t&&t.flat?r.parent=e.parent:r.children=[];if(!t||!t.no_state)for(i in e.state)e.state.hasOwnProperty(i)&&(r.state[i]=e.state[i]);t&&t.no_id&&(delete r.id,r.li_attr&&r.li_attr.id&&delete r.li_attr.id,r.a_attr&&r.a_attr.id&&delete r.a_attr.id),t&&t.flat&&e.id!=="#"&&n.push(r);if(!t||!t.no_children)for(i=0,s=e.children.length;i<s;i++)t&&t.flat?this.get_json(e.children[i],t,n):r.children.push(this.get_json(e.children[i],t));return t&&t.flat?n:e.id==="#"?r.children:r},create_node:function(e,t,n,r,i){e===null&&(e="#"),e=this.get_node(e);if(!e)return!1;n=n===undefined?"last":n;if(!n.toString().match(/^(before|after)$/)&&!i&&!this.is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,n,r,!0)});t||(t={text:this.get_string("New node")}),typeof t=="string"&&(t={text:t}),t.text===undefined&&(t.text=this.get_string("New node"));var s,o,u,a;e.id==="#"&&(n==="before"&&(n="first"),n==="after"&&(n="last"));switch(n){case"before":s=this.get_node(e.parent),n=$.inArray(e.id,s.children),e=s;break;case"after":s=this.get_node(e.parent),n=$.inArray(e.id,s.children)+1,e=s;break;case"inside":case"first":n=0;break;case"last":n=e.children.length;break;default:n||(n=0)}n>e.children.length&&(n=e.children.length),t.id||(t.id=!0);if(!this.check("create_node",t,e,n))return this.settings.core.error.call(this,this._data.core.last_error),!1;t.id===!0&&delete t.id,t=this._parse_model_from_json(t,e.id,e.parents.concat());if(!t)return!1;s=this.get_node(t),o=[],o.push(t),o=o.concat(s.children_d),this.trigger("model",{nodes:o,parent:e.id}),e.children_d=e.children_d.concat(o);for(u=0,a=e.parents.length;u<a;u++)this._model.data[e.parents[u]].children_d=this._model.data[e.parents[u]].children_d.concat(o);t=s,s=[];for(u=0,a=e.children.length;u<a;u++)s[u>=n?u+1:u]=e.children[u];return s[n]=t.id,e.children=s,this.redraw_node(e,!0),r&&r.call(this,this.get_node(t)),this.trigger("create_node",{node:this.get_node(t),parent:e.id,position:n}),t.id},rename_node:function(e,t){var n,r,i;if($.isArray(e)){e=e.slice();for(n=0,r=e.length;n<r;n++)this.rename_node(e[n],t);return!0}return e=this.get_node(e),!e||e.id==="#"?!1:(i=e.text,this.check("rename_node",e,this.get_parent(e),t)?(this.set_text(e,t),this.trigger("rename_node",{node:e,text:t,old:i}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(e){var t,n,r,i,s,o,u,a,f,l;if($.isArray(e)){e=e.slice();for(t=0,n=e.length;t<n;t++)this.delete_node(e[t]);return!0}e=this.get_node(e);if(!e||e.id==="#")return!1;r=this.get_node(e.parent),i=$.inArray(e.id,r.children),l=!1;if(!this.check("delete_node",e,r,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;i!==-1&&(r.children=$.vakata.array_remove(r.children,i)),s=e.children_d.concat([]),s.push(e.id);for(a=0,f=s.length;a<f;a++){for(o=0,u=e.parents.length;o<u;o++)i=$.inArray(s[a],this._model.data[e.parents[o]].children_d),i!==-1&&(this._model.data[e.parents[o]].children_d=$.vakata.array_remove(this._model.data[e.parents[o]].children_d,i));this._model.data[s[a]].state.selected&&(l=!0,i=$.inArray(s[a],this._data.core.selected),i!==-1&&(this._data.core.selected=$.vakata.array_remove(this._data.core.selected,i)))}this.trigger("delete_node",{node:e,parent:r.id}),l&&this.trigger("changed",{action:"delete_node",node:e,selected:this._data.core.selected,parent:r.id});for(a=0,f=s.length;a<f;a++)delete this._model.data[s[a]];return this.redraw_node(r,!0),!0},check:function(e,t,n,r,i){t=t&&t.id?t:this.get_node(t),n=n&&n.id?n:this.get_node(n);var s=e.match(/^move_node|copy_node|create_node$/i)?n:t,o=this.settings.core.check_callback;if(e==="move_node"||e==="copy_node")if((!i||!i.is_multi)&&(t.id===n.id||$.inArray(t.id,n.children)===r||$.inArray(n.id,t.children_d)!==-1))return this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:e,pos:r,obj:t&&t.id?t.id:!1,par:n&&n.id?n.id:!1})},!1;return s&&s.data&&(s=s.data),s&&s.functions&&(s.functions[e]===!1||s.functions[e]===!0)?(s.functions[e]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:t&&t.id?t.id:!1,par:n&&n.id?n.id:!1})}),s.functions[e]):o===!1||$.isFunction(o)&&o.call(this,e,t,n,r,i)===!1||o&&o[e]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:t&&t.id?t.id:!1,par:n&&n.id?n.id:!1})},!1):!0},last_error:function(){return this._data.core.last_error},move_node:function(e,t,n,r,i,s,o){var u,a,f,l,c,h,p,d,v,m,g,y,b,w;t=this.get_node(t),n=n===undefined?0:n;if(!t)return!1;if(!n.toString().match(/^(before|after)$/)&&!i&&!this.is_loaded(t))return this.load_node(t,function(){this.move_node(e,t,n,r,!0,!1,o)});if($.isArray(e)){if(e.length!==1){for(u=0,a=e.length;u<a;u++)if(v=this.move_node(e[u],t,n,r,i,!1,o))t=v,n="after";return this.redraw(),!0}e=e[0]}e=e&&e.id?e:this.get_node(e);if(!e||e.id==="#")return!1;f=(e.parent||"#").toString(),c=!n.toString().match(/^(before|after)$/)||t.id==="#"?t:this.get_node(t.parent),h=o?o:this._model.data[e.id]?this:$.jstree.reference(e.id),p=!h||!h._id||this._id!==h._id,l=h&&h._id&&f&&h._model.data[f]&&h._model.data[f].children?$.inArray(e.id,h._model.data[f].children):-1,h&&h._id&&(e=h._model.data[e.id]);if(p)return(v=this.copy_node(e,t,n,r,i,!1,o))?(h&&h.delete_node(e),v):!1;t.id==="#"&&(n==="before"&&(n="first"),n==="after"&&(n="last"));switch(n){case"before":n=$.inArray(t.id,c.children);break;case"after":n=$.inArray(t.id,c.children)+1;break;case"inside":case"first":n=0;break;case"last":n=c.children.length;break;default:n||(n=0)}n>c.children.length&&(n=c.children.length);if(!this.check("move_node",e,c,n,{core:!0,origin:o,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(e.parent===c.id){d=c.children.concat(),v=$.inArray(e.id,d),v!==-1&&(d=$.vakata.array_remove(d,v),n>v&&n--),v=[];for(m=0,g=d.length;m<g;m++)v[m>=n?m+1:m]=d[m];v[n]=e.id,c.children=v,this._node_changed(c.id),this.redraw(c.id==="#")}else{v=e.children_d.concat(),v.push(e.id);for(m=0,g=e.parents.length;m<g;m++){d=[],w=h._model.data[e.parents[m]].children_d;for(y=0,b=w.length;y<b;y++)$.inArray(w[y],v)===-1&&d.push(w[y]);h._model.data[e.parents[m]].children_d=d}h._model.data[f].children=$.vakata.array_remove_item(h._model.data[f].children,e.id);for(m=0,g=c.parents.length;m<g;m++)this._model.data[c.parents[m]].children_d=this._model.data[c.parents[m]].children_d.concat(v);d=[];for(m=0,g=c.children.length;m<g;m++)d[m>=n?m+1:m]=c.children[m];d[n]=e.id,c.children=d,c.children_d.push(e.id),c.children_d=c.children_d.concat(e.children_d),e.parent=c.id,v=c.parents.concat(),v.unshift(c.id),w=e.parents.length,e.parents=v,v=v.concat();for(m=0,g=e.children_d.length;m<g;m++)this._model.data[e.children_d[m]].parents=this._model.data[e.children_d[m]].parents.slice(0,w*-1),Array.prototype.push.apply(this._model.data[e.children_d[m]].parents,v);if(f==="#"||c.id==="#")this._model.force_full_redraw=!0;this._model.force_full_redraw||(this._node_changed(f),this._node_changed(c.id)),s||this.redraw()}return r&&r.call(this,e,c,n),this.trigger("move_node",{node:e,parent:c.id,position:n,old_parent:f,old_position:l,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id,old_instance:h,new_instance:this}),e.id},copy_node:function(e,t,n,r,i,s,o){var u,a,f,l,c,h,p,d,v,m,g;t=this.get_node(t),n=n===undefined?0:n;if(!t)return!1;if(!n.toString().match(/^(before|after)$/)&&!i&&!this.is_loaded(t))return this.load_node(t,function(){this.copy_node(e,t,n,r,!0,!1,o)});if($.isArray(e)){if(e.length!==1){for(u=0,a=e.length;u<a;u++)if(l=this.copy_node(e[u],t,n,r,i,!0,o))t=l,n="after";return this.redraw(),!0}e=e[0]}e=e&&e.id?e:this.get_node(e);if(!e||e.id==="#")return!1;d=(e.parent||"#").toString(),v=!n.toString().match(/^(before|after)$/)||t.id==="#"?t:this.get_node(t.parent),m=o?o:this._model.data[e.id]?this:$.jstree.reference(e.id),g=!m||!m._id||this._id!==m._id,m&&m._id&&(e=m._model.data[e.id]),t.id==="#"&&(n==="before"&&(n="first"),n==="after"&&(n="last"));switch(n){case"before":n=$.inArray(t.id,v.children);break;case"after":n=$.inArray(t.id,v.children)+1;break;case"inside":case"first":n=0;break;case"last":n=v.children.length;break;default:n||(n=0)}n>v.children.length&&(n=v.children.length);if(!this.check("copy_node",e,v,n,{core:!0,origin:o,is_multi:m&&m._id&&m._id!==this._id,is_foreign:!m||!m._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;p=m?m.get_json(e,{no_id:!0,no_data:!0,no_state:!0}):e;if(!p)return!1;p.id===!0&&delete p.id,p=this._parse_model_from_json(p,v.id,v.parents.concat());if(!p)return!1;l=this.get_node(p),e&&e.state&&e.state.loaded===!1&&(l.state.loaded=!1),f=[],f.push(p),f=f.concat(l.children_d),this.trigger("model",{nodes:f,parent:v.id});for(c=0,h=v.parents.length;c<h;c++)this._model.data[v.parents[c]].children_d=this._model.data[v.parents[c]].children_d.concat(f);f=[];for(c=0,h=v.children.length;c<h;c++)f[c>=n?c+1:c]=v.children[c];return f[n]=l.id,v.children=f,v.children_d.push(l.id),v.children_d=v.children_d.concat(l.children_d),v.id==="#"&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(v.id),s||this.redraw(v.id==="#"),r&&r.call(this,l,v,n),this.trigger("copy_node",{node:l,original:e,parent:v.id,position:n,old_parent:d,old_position:m&&m._id&&d&&m._model.data[d]&&m._model.data[d].children?$.inArray(e.id,m._model.data[d].children):-1,is_multi:m&&m._id&&m._id!==this._id,is_foreign:!m||!m._id,old_instance:m,new_instance:this}),l.id},cut:function(e){e||(e=this._data.core.selected.concat()),$.isArray(e)||(e=[e]);if(!e.length)return!1;var t=[],s,o,u;for(o=0,u=e.length;o<u;o++)s=this.get_node(e[o]),s&&s.id&&s.id!=="#"&&t.push(s);if(!t.length)return!1;n=t,i=this,r="move_node",this.trigger("cut",{node:e})},copy:function(e){e||(e=this._data.core.selected.concat()),$.isArray(e)||(e=[e]);if(!e.length)return!1;var t=[],s,o,u;for(o=0,u=e.length;o<u;o++)s=this.get_node(e[o]),s&&s.id&&s.id!=="#"&&t.push(s);if(!t.length)return!1;n=t,i=this,r="copy_node",this.trigger("copy",{node:e})},get_buffer:function(){return{mode:r,node:n,inst:i}},can_paste:function(){return r!==!1&&n!==!1},paste:function(e,t){e=this.get_node(e);if(!e||!r||!r.match(/^(copy_node|move_node)$/)||!n)return!1;this[r](n,e,t,!1,!1,!1,i)&&this.trigger("paste",{parent:e.id,node:n,mode:r}),n=!1,r=!1,i=!1},clear_buffer:function(){n=!1,r=!1,i=!1,this.trigger("clear_buffer")},edit:function(e,t,n){var r,i,s,o,u,a,f,l,c;e=this.get_node(e);if(!e)return!1;if(this.settings.core.check_callback===!1)return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1;c=e,t=typeof t=="string"?t:e.text,this.set_text(e,""),e=this._open_to(e),c.text=t,r=this._data.core.rtl,i=this.element.width(),s=e.children(".jstree-anchor"),o=$("<span>"),u=t,a=$("<div />",{css:{position:"absolute",top:"-200px",left:r?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),f=$("<input />",{value:u,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:$.proxy(function(){var t=o.children(".jstree-rename-input"),r=t.val(),i=this.settings.core.force_text,f;r===""&&(r=u),a.remove(),o.replaceWith(s),o.remove(),u=i?u:$("<div></div>").append($.parseHTML(u)).html(),this.set_text(e,u),f=!!this.rename_node(e,i?$("<div></div>").text(r).text():$("<div></div>").append($.parseHTML(r)).html()),f||this.set_text(e,u),n&&n.call(this,c,f)},this),keydown:function(e){var t=e.which;t===27&&(this.value=u),(t===27||t===13||t===37||t===38||t===39||t===40||t===32)&&e.stopImmediatePropagation();if(t===27||t===13)e.preventDefault(),this.blur()},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){f.width(Math.min(a.text("pW"+this.value).width(),i))},keypress:function(e){if(e.which===13)return!1}}),l={fontFamily:s.css("fontFamily")||"",fontSize:s.css("fontSize")||"",fontWeight:s.css("fontWeight")||"",fontStyle:s.css("fontStyle")||"",fontStretch:s.css("fontStretch")||"",fontVariant:s.css("fontVariant")||"",letterSpacing:s.css("letterSpacing")||"",wordSpacing:s.css("wordSpacing")||""},o.attr("class",s.attr("class")).append(s.contents().clone()).append(f),s.replaceWith(o),a.css(l),f.css(l).width(Math.min(a.text("pW"+f[0].value).width(),i))[0].select()},set_theme:function(e,t){if(!e)return!1;if(t===!0){var n=this.settings.core.themes.dir;n||(n=$.jstree.path+"/themes"),t=n+"/"+e+"/style.css"}t&&$.inArray(t,s)===-1&&($("head").append('<link rel="stylesheet" href="'+t+'" type="text/css" />'),s.push(t)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=e,this.element.addClass("jstree-"+e),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+e+"-responsive"),this.trigger("set_theme",{theme:e})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(e,t){var n,r,i,s;if($.isArray(e)){e=e.slice();for(n=0,r=e.length;n<r;n++)this.set_icon(e[n],t);return!0}return e=this.get_node(e),!e||e.id==="#"?!1:(s=e.icon,e.icon=t===!0||t===null||t===undefined||t===""?!0:t,i=this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon"),t===!1?this.hide_icon(e):t===!0||t===null||t===undefined||t===""?(i.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"),s===!1&&this.show_icon(e)):t.indexOf("/")===-1&&t.indexOf(".")===-1?(i.removeClass(s).css("background",""),i.addClass(t+" jstree-themeicon-custom").attr("rel",t),s===!1&&this.show_icon(e)):(i.removeClass(s).css("background",""),i.addClass("jstree-themeicon-custom").css("background","url('"+t+"') center center no-repeat").attr("rel",t),s===!1&&this.show_icon(e)),!0)},get_icon:function(e){return e=this.get_node(e),!e||e.id==="#"?!1:e.icon},hide_icon:function(e){var t,n;if($.isArray(e)){e=e.slice();for(t=0,n=e.length;t<n;t++)this.hide_icon(e[t]);return!0}return e=this.get_node(e),!e||e==="#"?!1:(e.icon=!1,this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(e){var t,n,r;if($.isArray(e)){e=e.slice();for(t=0,n=e.length;t<n;t++)this.show_icon(e[t]);return!0}return e=this.get_node(e),!e||e==="#"?!1:(r=this.get_node(e,!0),e.icon=r.length?r.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,e.icon||(e.icon=!0),r.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},$.vakata={},$.vakata.attributes=function(e,t){e=$(e)[0];var n=t?{}:[];return e&&e.attributes&&$.each(e.attributes,function(e,r){if($.inArray(r.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])!==-1)return;r.value!==null&&$.trim(r.value)!==""&&(t?n[r.name]=r.value:n.push(r.name))}),n},$.vakata.array_unique=function(e){var t=[],n,r,i,s={};for(n=0,i=e.length;n<i;n++)s[e[n]]===undefined&&(t.push(e[n]),s[e[n]]=!0);return t},$.vakata.array_remove=function(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e},$.vakata.array_remove_item=function(e,t){var n=$.inArray(t,e);return n!==-1?$.vakata.array_remove(e,n):e};var c=u.createElement("I");c.className="jstree-icon jstree-checkbox",c.setAttribute("role","presentation"),$.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},$.jstree.plugins.checkbox=function(e,t){this.bind=function(){t.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",$.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",$.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),this.settings.checkbox.cascade.indexOf("undetermined")!==-1&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",$.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",$.proxy(function(e,t){var n=this._model.data,r=n[t.parent],i=t.nodes,s,o;for(s=0,o=i.length;s<o;s++)n[i[s]].state.checked=n[i[s]].original&&n[i[s]].original.state&&n[i[s]].original.state.checked,n[i[s]].state.checked&&this._data.checkbox.selected.push(i[s])},this)),(this.settings.checkbox.cascade.indexOf("up")!==-1||this.settings.checkbox.cascade.indexOf("down")!==-1)&&this.element.on("model.jstree",$.proxy(function(e,t){var n=this._model.data,r=n[t.parent],i=t.nodes,s=[],o,u,a,f,l,c,h=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection;if(h.indexOf("down")!==-1)if(r.state[p?"selected":"checked"]){for(u=0,a=i.length;u<a;u++)n[i[u]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(i)}else for(u=0,a=i.length;u<a;u++)if(n[i[u]].state[p?"selected":"checked"]){for(f=0,l=n[i[u]].children_d.length;f<l;f++)n[n[i[u]].children_d[f]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(n[i[u]].children_d)}if(h.indexOf("up")!==-1){for(u=0,a=r.children_d.length;u<a;u++)n[r.children_d[u]].children.length||s.push(n[r.children_d[u]].parent);s=$.vakata.array_unique(s);for(f=0,l=s.length;f<l;f++){r=n[s[f]];while(r&&r.id!=="#"){o=0;for(u=0,a=r.children.length;u<a;u++)o+=n[r.children[u]].state[p?"selected":"checked"];if(o!==a)break;r.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(r.id),c=this.get_node(r,!0),c&&c.length&&c.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}}}this._data[p?"core":"checkbox"].selected=$.vakata.array_unique(this._data[p?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",$.proxy(function(e,t){var n=t.node,r=this._model.data,i=this.get_node(n.parent),s=this.get_node(n,!0),o,u,a,f,l=this.settings.checkbox.cascade,c=this.settings.checkbox.tie_selection;if(l.indexOf("down")!==-1){this._data[c?"core":"checkbox"].selected=$.vakata.array_unique(this._data[c?"core":"checkbox"].selected.concat(n.children_d));for(o=0,u=n.children_d.length;o<u;o++)f=r[n.children_d[o]],f.state[c?"selected":"checked"]=!0,f&&f.original&&f.original.state&&f.original.state.undetermined&&(f.original.state.undetermined=!1)}if(l.indexOf("up")!==-1)while(i&&i.id!=="#"){a=0;for(o=0,u=i.children.length;o<u;o++)a+=r[i.children[o]].state[c?"selected":"checked"];if(a!==u)break;i.state[c?"selected":"checked"]=!0,this._data[c?"core":"checkbox"].selected.push(i.id),f=this.get_node(i,!0),f&&f.length&&f.attr("aria-selected",!0).children(".jstree-anchor").addClass(c?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}l.indexOf("down")!==-1&&s.length&&s.find(".jstree-anchor").addClass(c?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",$.proxy(function(e,t){var n=this.get_node("#"),r=this._model.data,i,s,o;for(i=0,s=n.children_d.length;i<s;i++)o=r[n.children_d[i]],o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",$.proxy(function(e,t){var n=t.node,r=this.get_node(n,!0),i,s,o,u=this.settings.checkbox.cascade,a=this.settings.checkbox.tie_selection;n&&n.original&&n.original.state&&n.original.state.undetermined&&(n.original.state.undetermined=!1);if(u.indexOf("down")!==-1)for(i=0,s=n.children_d.length;i<s;i++)o=this._model.data[n.children_d[i]],o.state[a?"selected":"checked"]=!1,o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1);if(u.indexOf("up")!==-1)for(i=0,s=n.parents.length;i<s;i++)o=this._model.data[n.parents[i]],o.state[a?"selected":"checked"]=!1,o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),o=this.get_node(n.parents[i],!0),o&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(a?"jstree-clicked":"jstree-checked");o=[];for(i=0,s=this._data[a?"core":"checkbox"].selected.length;i<s;i++)(u.indexOf("down")===-1||$.inArray(this._data[a?"core":"checkbox"].selected[i],n.children_d)===-1)&&(u.indexOf("up")===-1||$.inArray(this._data[a?"core":"checkbox"].selected[i],n.parents)===-1)&&o.push(this._data[a?"core":"checkbox"].selected[i]);this._data[a?"core":"checkbox"].selected=$.vakata.array_unique(o),u.indexOf("down")!==-1&&r.length&&r.find(".jstree-anchor").removeClass(a?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),this.settings.checkbox.cascade.indexOf("up")!==-1&&this.element.on("delete_node.jstree",$.proxy(function(e,t){var n=this.get_node(t.parent),r=this._model.data,i,s,o,u,a=this.settings.checkbox.tie_selection;while(n&&n.id!=="#"){o=0;for(i=0,s=n.children.length;i<s;i++)o+=r[n.children[i]].state[a?"selected":"checked"];if(o!==s)break;n.state[a?"selected":"checked"]=!0,this._data[a?"core":"checkbox"].selected.push(n.id),u=this.get_node(n,!0),u&&u.length&&u.attr("aria-selected",!0).children(".jstree-anchor").addClass(a?"jstree-clicked":"jstree-checked"),n=this.get_node(n.parent)}},this)).on("move_node.jstree",$.proxy(function(e,t){var n=t.is_multi,r=t.old_parent,i=this.get_node(t.parent),s=this._model.data,o,u,a,f,l,c=this.settings.checkbox.tie_selection;if(!n){o=this.get_node(r);while(o&&o.id!=="#"){u=0;for(a=0,f=o.children.length;a<f;a++)u+=s[o.children[a]].state[c?"selected":"checked"];if(u!==f)break;o.state[c?"selected":"checked"]=!0,this._data[c?"core":"checkbox"].selected.push(o.id),l=this.get_node(o,!0),l&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(c?"jstree-clicked":"jstree-checked"),o=this.get_node(o.parent)}}o=i;while(o&&o.id!=="#"){u=0;for(a=0,f=o.children.length;a<f;a++)u+=s[o.children[a]].state[c?"selected":"checked"];if(u===f)o.state[c?"selected":"checked"]||(o.state[c?"selected":"checked"]=!0,this._data[c?"core":"checkbox"].selected.push(o.id),l=this.get_node(o,!0),l&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(c?"jstree-clicked":"jstree-checked"));else{if(!o.state[c?"selected":"checked"])break;o.state[c?"selected":"checked"]=!1,this._data[c?"core":"checkbox"].selected=$.vakata.array_remove_item(this._data[c?"core":"checkbox"].selected,o.id),l=this.get_node(o,!0),l&&l.length&&l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(c?"jstree-clicked":"jstree-checked")}o=this.get_node(o.parent)}},this))},this._undetermined=function(){if(this.element===null)return;var e,t,n,r,i={},s=this._model.data,o=this.settings.checkbox.tie_selection,u=this._data[o?"core":"checkbox"].selected,a=[],f=this;for(e=0,t=u.length;e<t;e++)if(s[u[e]]&&s[u[e]].parents)for(n=0,r=s[u[e]].parents.length;n<r;n++)i[s[u[e]].parents[n]]===undefined&&s[u[e]].parents[n]!=="#"&&(i[s[u[e]].parents[n]]=!0,a.push(s[u[e]].parents[n]));this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var o=f.get_node(this),u;if(!o.state.loaded){if(o.original&&o.original.state&&o.original.state.undetermined&&o.original.state.undetermined===!0){i[o.id]===undefined&&o.id!=="#"&&(i[o.id]=!0,a.push(o.id));for(n=0,r=o.parents.length;n<r;n++)i[o.parents[n]]===undefined&&o.parents[n]!=="#"&&(i[o.parents[n]]=!0,a.push(o.parents[n]))}}else for(e=0,t=o.children_d.length;e<t;e++){u=s[o.children_d[e]];if(!u.state.loaded&&u.original&&u.original.state&&u.original.state.undetermined&&u.original.state.undetermined===!0){i[u.id]===undefined&&u.id!=="#"&&(i[u.id]=!0,a.push(u.id));for(n=0,r=u.parents.length;n<r;n++)i[u.parents[n]]===undefined&&u.parents[n]!=="#"&&(i[u.parents[n]]=!0,a.push(u.parents[n]))}}}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined");for(e=0,t=a.length;e<t;e++)s[a[e]].state[o?"selected":"checked"]||(u=this.get_node(a[e],!0),u&&u.length&&u.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"))},this.redraw_node=function(e,n,r,i){e=t.redraw_node.apply(this,arguments);if(e){var s,o,u=null;for(s=0,o=e.childNodes.length;s<o;s++)if(e.childNodes[s]&&e.childNodes[s].className&&e.childNodes[s].className.indexOf("jstree-anchor")!==-1){u=e.childNodes[s];break}u&&(!this.settings.checkbox.tie_selection&&this._model.data[e.id].state.checked&&(u.className+=" jstree-checked"),u.insertBefore(c.cloneNode(!1),u.childNodes[0]))}return!r&&this.settings.checkbox.cascade.indexOf("undetermined")!==-1&&(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50)),e},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(e){e=this.get_node(e);var t=this.settings.checkbox.cascade,n,r,i=this.settings.checkbox.tie_selection,s=this._data[i?"core":"checkbox"].selected,o=this._model.data;if(!e||e.state[i?"selected":"checked"]===!0||t.indexOf("undetermined")===-1||t.indexOf("down")===-1&&t.indexOf("up")===-1)return!1;if(!e.state.loaded&&e.original.state.undetermined===!0)return!0;for(n=0,r=e.children_d.length;n<r;n++)if($.inArray(e.children_d[n],s)!==-1||!o[e.children_d[n]].state.loaded&&o[e.children_d[n]].original.state.undetermined)return!0;return!1},this.activate_node=function(e,n){this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||$(n.target).hasClass("jstree-checkbox"))&&(n.ctrlKey=!0);if(this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!$(n.target).hasClass("jstree-checkbox"))return t.activate_node.call(this,e,n);if(this.is_disabled(e))return!1;this.is_checked(e)?this.uncheck_node(e,n):this.check_node(e,n),this.trigger("activate_node",{node:this.get_node(e)})},this.check_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.select_node(e,!1,!0,t);var n,r,i,s;if($.isArray(e)){e=e.slice();for(r=0,i=e.length;r<i;r++)this.check_node(e[r],t);return!0}e=this.get_node(e);if(!e||e.id==="#")return!1;n=this.get_node(e,!0),e.state.checked||(e.state.checked=!0,this._data.checkbox.selected.push(e.id),n&&n.length&&n.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.uncheck_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.deselect_node(e,!1,t);var n,r,i;if($.isArray(e)){e=e.slice();for(n=0,r=e.length;n<r;n++)this.uncheck_node(e[n],t);return!0}e=this.get_node(e);if(!e||e.id==="#")return!1;i=this.get_node(e,!0),e.state.checked&&(e.state.checked=!1,this._data.checkbox.selected=$.vakata.array_remove_item(this._data.checkbox.selected,e.id),i.length&&i.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var e=this._data.checkbox.selected.concat([]),t,n;this._data.checkbox.selected=this._model.data["#"].children_d.concat();for(t=0,n=this._data.checkbox.selected.length;t<n;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e=this._data.checkbox.selected.concat([]),t,n;for(t=0,n=this._data.checkbox.selected.length;t<n;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:e})},this.is_checked=function(e){return this.settings.checkbox.tie_selection?this.is_selected(e):(e=this.get_node(e),!e||e.id==="#"?!1:e.state.checked)},this.get_checked=function(e){return this.settings.checkbox.tie_selection?this.get_selected(e):e?$.map(this._data.checkbox.selected,$.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_top_selected(e);var t=this.get_checked(!0),n={},r,i,s,o;for(r=0,i=t.length;r<i;r++)n[t[r].id]=t[r];for(r=0,i=t.length;r<i;r++)for(s=0,o=t[r].children_d.length;s<o;s++)n[t[r].children_d[s]]&&delete n[t[r].children_d[s]];t=[];for(r in n)n.hasOwnProperty(r)&&t.push(r);return e?$.map(t,$.proxy(function(e){return this.get_node(e)},this)):t},this.get_bottom_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(e);var t=this.get_checked(!0),n=[],r,i;for(r=0,i=t.length;r<i;r++)t[r].children.length||n.push(t[r].id);return e?$.map(n,$.proxy(function(e){return this.get_node(e)},this)):n},this.load_node=function(e,n){var r,i,s,o,u,a;if(!$.isArray(e)&&!this.settings.checkbox.tie_selection){a=this.get_node(e);if(a&&a.state.loaded)for(r=0,i=a.children_d.length;r<i;r++)this._model.data[a.children_d[r]].state.checked&&(u=!0,this._data.checkbox.selected=$.vakata.array_remove_item(this._data.checkbox.selected,a.children_d[r]))}return t.load_node.apply(this,arguments)},this.get_state=function(){var e=t.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(e,n){var r=t.set_state.apply(this,arguments);if(r&&e.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var i=this;$.each(e.checkbox,function(e,t){i.check_node(t)})}return delete e.checkbox,this.set_state(e,n),!1}return r}};var h=u.createElement("DIV");h.setAttribute("unselectable","on"),h.setAttribute("role","presentation"),h.className="jstree-wholerow",h.innerHTML="&#160;",$.jstree.plugins.wholerow=function(e,t){this.bind=function(){t.bind.call(this),this.element.on("ready.jstree set_state.jstree",$.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",$.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",$.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",$.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var n=!1,r,i;for(r=0,i=t.selected.length;r<i;r++)n=this.get_node(t.selected[r],!0),n&&n.length&&n.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",$.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",$.proxy(function(e,t){if(e.type==="hover_node"&&this.is_disabled(t.node))return;this.get_node(t.node,!0).children(".jstree-wholerow")[e.type==="hover_node"?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",$.proxy(function(e){e.preventDefault();var t=$.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t)},this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=$.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",$.proxy(function(e){e.stopImmediatePropagation();var t=$.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",$.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",$.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),t.teardown.call(this)},this.redraw_node=function(e,n,r,i){e=t.redraw_node.apply(this,arguments);if(e){var s=h.cloneNode(!0);$.inArray(e.id,this._data.core.selected)!==-1&&(s.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===e.id&&(s.className+=" jstree-wholerow-hovered"),e.insertBefore(s,e.childNodes[0])}return e}};if(u.registerElement&&Object&&Object.create){var p=Object.create(HTMLElement.prototype);p.createdCallback=function(){var e={core:{},plugins:[]},t;for(t in $.jstree.plugins)$.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(e.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(e[t]=JSON.parse(this.getAttribute(t))));for(t in $.jstree.defaults.core)$.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(e.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));$(this).jstree(e)};try{u.registerElement("vakata-jstree",{prototype:p})}catch(d){}}return $.jstree}),n("ui/Tree",["require","dep/jquery.jstree"],function(e){function n(e,n){this.instance=t.create(e,n)}function r(e){return e.nodeType===1&&e.tagName.toLowerCase()==="div"}var t=e("dep/jquery.jstree");n.prototype={ins:function(){return this.instance},destroy:function(){this.instance.destroy()}};var i="bizTree";return $.extend($.fn,{bizTree:function(e,t){var s;switch(e){case"ins":return this.data(i).ins();case"destroy":this.each(function(){s=$(this).data(i),s&&(s.destroy(),$(this).data(i,null))});break;default:this.each(function(){!$(this).data(i)&&r(this)&&$(this).data(i,new n(this,e))})}return this}}),n}),n("dep/jquery.datepicker",["require"],function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}function n(){var e=new Date;return t(e.getFullYear(),e.getMonth(),e.getDate())}function r(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function i(e){return function(){return this[e].apply(this,arguments)}}function a(e,t){function o(e,t){return t.toLowerCase()}var n=$(e).data(),r={},i,s=new RegExp("^"+t.toLowerCase()+"([A-Z])");t=new RegExp("^"+t.toLowerCase());for(var u in n)t.test(u)&&(i=u.replace(s,o),r[i]=n[u]);return r}function f(e){var t={};if(!d[e]){e=e.split("-")[0];if(!d[e])return}var n=d[e];return $.each(p,function(e,r){r in n&&(t[r]=n[r])}),t}var s=function(){var e={get:function(e){return this.slice(e)[0]},contains:function(e){var t=e&&e.valueOf();for(var n=0,r=this.length;n<r;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(e){if(!e)return;$.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e)},clear:function(){this.length=0},copy:function(){var e=new s;return e.replace(this),e}};return function(){var t=[];return t.push.apply(t,arguments),$.extend(t,e),t}}(),o=function(e,t){this._process_options(t),this.dates=new s,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=$(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.picker=$(v.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};o.prototype={constructor:o,_process_options:function(e){this._o=$.extend({},this._o,e);var r=this.o=$.extend({},this._o),i=r.language;d[i]||(i=i.split("-")[0],d[i]||(i=h.language)),r.language=i;switch(r.startView){case 2:case"decade":r.startView=2;break;case 1:case"year":r.startView=1;break;default:r.startView=0}switch(r.minViewMode){case 1:case"months":r.minViewMode=1;break;case 2:case"years":r.minViewMode=2;break;default:r.minViewMode=0}r.startView=Math.max(r.startView,r.minViewMode),r.multidate!==!0&&(r.multidate=Number(r.multidate)||!1,r.multidate!==!1&&(r.multidate=Math.max(0,r.multidate))),r.multidateSeparator=String(r.multidateSeparator),r.weekStart%=7,r.weekEnd=(r.weekStart+6)%7;var s=v.parseFormat(r.format);r.startDate!==-Infinity&&(r.startDate?r.startDate instanceof Date?r.startDate=this._local_to_utc(this._zero_time(r.startDate)):r.startDate=v.parseDate(r.startDate,s,r.language):r.startDate=-Infinity),r.endDate!==Infinity&&(r.endDate?r.endDate instanceof Date?r.endDate=this._local_to_utc(this._zero_time(r.endDate)):r.endDate=v.parseDate(r.endDate,s,r.language):r.endDate=Infinity),r.daysOfWeekDisabled=r.daysOfWeekDisabled||[],$.isArray(r.daysOfWeekDisabled)||(r.daysOfWeekDisabled=r.daysOfWeekDisabled.split(/[,\s]*/)),r.daysOfWeekDisabled=$.map(r.daysOfWeekDisabled,function(e){return parseInt(e,10)}),r.datesDisabled=r.datesDisabled||[];if(!$.isArray(r.datesDisabled)){var o=[];o.push(v.parseDate(r.datesDisabled,s,r.language)),r.datesDisabled=o}r.datesDisabled=$.map(r.datesDisabled,function(e){return v.parseDate(e,s,r.language)});var u=String(r.orientation).toLowerCase().split(/\s+/g),a=r.orientation.toLowerCase();u=$.grep(u,function(e){return/^auto|left|right|top|bottom$/.test(e)}),r.orientation={x:"auto",y:"auto"};if(!!a&&a!=="auto")if(u.length===1)switch(u[0]){case"top":case"bottom":r.orientation.y=u[0];break;case"left":case"right":r.orientation.x=u[0]}else a=$.grep(u,function(e){return/^left|right$/.test(e)}),r.orientation.x=a[0]||"auto",a=$.grep(u,function(e){return/^top|bottom$/.test(e)}),r.orientation.y=a[0]||"auto";if(r.defaultViewDate){var f=r.defaultViewDate.year||(new Date).getFullYear(),l=r.defaultViewDate.month||0,c=r.defaultViewDate.day||1;r.defaultViewDate=t(f,l,c)}else r.defaultViewDate=n();r.showOnFocus=r.showOnFocus!==undefined?r.showOnFocus:!0},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t=0,n,r,i;t<e.length;t++)n=e[t][0],e[t].length===2?(r=undefined,i=e[t][1]):e[t].length===3&&(r=e[t][1],i=e[t][2]),n.on(i,r)},_unapplyEvents:function(e){for(var t=0,n,r,i;t<e.length;t++)n=e[t][0],e[t].length===2?(i=undefined,r=e[t][1]):e[t].length===3&&(i=e[t][1],r=e[t][2]),n.off(r,i)},_buildEvents:function(){var e={keyup:$.proxy(function(e){$.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:$.proxy(this.keydown,this)};this.o.showOnFocus===!0&&(e.focus=$.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),e],[this.component,{click:$.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:$.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:$.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:$.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:$.proxy(this.click,this)}],[$(window),{resize:$.proxy(this.place,this)}],[$(document),{"mousedown touchstart":$.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,t){var n=t||this.dates.get(-1),r=this._utc_to_local(n);this.element.trigger({type:e,date:r,dates:$.map(this.dates,this._utc_to_local),format:$.proxy(function(e,t){arguments.length===0?(e=this.dates.length-1,t=this.o.format):typeof e=="string"&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return v.formatDate(n,t,this.o.language)},this)})},show:function(){if(this.element.attr("readonly")&&this.o.enableOnReadonly===!1)return;return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&$(this.element).blur(),this},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},_utc_to_local:function(e){return e&&new Date(e.getTime()+e.getTimezoneOffset()*6e4)},_local_to_utc:function(e){return e&&new Date(e.getTime()-e.getTimezoneOffset()*6e4)},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return $.map(this.dates,this._utc_to_local)},getUTCDates:function(){return $.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return typeof e!="undefined"?new Date(e):null},clearDates:function(){var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=$.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=$.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,$.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:i("setDates"),setUTCDate:i("setUTCDates"),setValue:function(){var e=this.getFormattedDate();return this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change(),this},getFormattedDate:function(e){e===undefined&&(e=this.o.format);var t=this.o.language;return $.map(this.dates,function(n){return v.formatDate(n,e,t)}).join(this.o.multidateSeparator)},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows(),this},setDatesDisabled:function(e){this._process_options({datesDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),t=this.picker.outerHeight(),n=10,r=$(this.o.container).width(),i=$(this.o.container).height(),s=$(this.o.container).scrollTop(),o=$(this.o.container).offset(),u=[];this.element.parents().each(function(){var e=$(this).css("z-index");e!=="auto"&&e!==0&&u.push(parseInt(e))});var a=Math.max.apply(Math,u)+10,f=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),c=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),h=f.left-o.left,p=f.top-o.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(h-=e-c)):f.left<0?(this.picker.addClass("datepicker-orient-left"),h-=f.left-n):h+e>r?(this.picker.addClass("datepicker-orient-right"),h=f.left+c-e):this.picker.addClass("datepicker-orient-left");var d=this.o.orientation.y,v,m;d==="auto"&&(v=-s+p-t,m=s+i-(p+l+t),Math.max(v,m)===m?d="top":d="bottom"),this.picker.addClass("datepicker-orient-"+d),d==="top"?p+=l:p-=t+parseInt(this.picker.css("padding-top"));if(this.o.rtl){var g=r-(h+c);this.picker.css({top:p,right:g,zIndex:a})}else this.picker.css({top:p,left:h,zIndex:a});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),t=[],n=!1;return arguments.length?($.each(arguments,$.proxy(function(e,n){n instanceof Date&&(n=this._local_to_utc(n)),t.push(n)},this)),n=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),t&&this.o.multidate?t=t.split(this.o.multidateSeparator):t=[t],delete this.element.data().date),t=$.map(t,$.proxy(function(e){return v.parseDate(e,this.o.format,this.o.language)},this)),t=$.grep(t,$.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(t),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),n?this.setValue():t.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill(),this},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days thead tr:first-child .datepicker-switch").attr("colspan",function(e,t){return parseInt(t)+1});var n='<th class="cw">&#160;</th>';t+=n}while(e<this.o.weekStart+7)t+='<th class="dow">'+d[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+d[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(e){!e||!e.length?delete this.range:this.range=$.map(e,function(e){return e.valueOf()}),this.fill()},getClassNames:function(e){var t=[],n=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),s=new Date;return e.getUTCFullYear()<n||e.getUTCFullYear()===n&&e.getUTCMonth()<i?t.push("old"):(e.getUTCFullYear()>n||e.getUTCFullYear()===n&&e.getUTCMonth()>i)&&t.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&t.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===s.getFullYear()&&e.getUTCMonth()===s.getMonth()&&e.getUTCDate()===s.getDate()&&t.push("today"),this.dates.contains(e)!==-1&&t.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||$.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&t.push("disabled"),this.o.datesDisabled.length>0&&$.grep(this.o.datesDisabled,function(t){return r(e,t)}).length>0&&t.push("disabled","disabled-date"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&t.push("range"),$.inArray(e.valueOf(),this.range)!==-1&&t.push("selected")),t},fill:function(){var e=new Date(this.viewDate),n=e.getUTCFullYear(),r=e.getUTCMonth(),i=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,s=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,o=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,u=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,a=d[this.o.language].today||d.en.today||"",f=d[this.o.language].clear||d.en.clear||"",l;if(isNaN(n)||isNaN(r))return;this.picker.find(".datepicker-days thead .datepicker-switch").text(d[this.o.language].months[r]+" "+n),this.picker.find("tfoot .today").text(a).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(f).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var c=t(n,r-1,28),h=v.getDaysInMonth(c.getUTCFullYear(),c.getUTCMonth());c.setUTCDate(h),c.setUTCDate(h-(c.getUTCDay()-this.o.weekStart+7)%7);var p=new Date(c);p.setUTCDate(p.getUTCDate()+42),p=p.valueOf();var m=[],g;while(c.valueOf()<p){if(c.getUTCDay()===this.o.weekStart){m.push("<tr>");if(this.o.calendarWeeks){var y=new Date(+c+(this.o.weekStart-c.getUTCDay()-7)%7*864e5),b=new Date(Number(y)+(11-y.getUTCDay())%7*864e5),w=new Date(Number(w=t(b.getUTCFullYear(),0,1))+(11-w.getUTCDay())%7*864e5),E=(b-w)/864e5/7+1;m.push('<td class="cw">'+E+"</td>")}}g=this.getClassNames(c),g.push("day");if(this.o.beforeShowDay!==$.noop){var S=this.o.beforeShowDay(this._utc_to_local(c));S===undefined?S={}:typeof S=="boolean"?S={enabled:S}:typeof S=="string"&&(S={classes:S}),S.enabled===!1&&g.push("disabled"),S.classes&&(g=g.concat(S.classes.split(/\s+/))),S.tooltip&&(l=S.tooltip)}g=$.unique(g),m.push('<td class="'+g.join(" ")+'"'+(l?' title="'+l+'"':"")+">"+c.getUTCDate()+"</td>"),l=null,c.getUTCDay()===this.o.weekEnd&&m.push("</tr>"),c.setUTCDate(c.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(m.join(""));var x=this.picker.find(".datepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");$.each(this.dates,function(e,t){t.getUTCFullYear()===n&&x.eq(t.getUTCMonth()).addClass("active")}),(n<i||n>o)&&x.addClass("disabled"),n===i&&x.slice(0,s).addClass("disabled"),n===o&&x.slice(u+1).addClass("disabled");if(this.o.beforeShowMonth!==$.noop){var T=this;$.each(x,function(e,t){if(!$(t).hasClass("disabled")){var r=new Date(n,e,1),i=T.o.beforeShowMonth(r);i===!1&&$(t).addClass("disabled")}})}m="",n=parseInt(n/10,10)*10;var N=this.picker.find(".datepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).end().find("td");n-=1;var C=$.map(this.dates,function(e){return e.getUTCFullYear()}),k;for(var L=-1;L<11;L++)k=["year"],L===-1?k.push("old"):L===10&&k.push("new"),$.inArray(n,C)!==-1&&k.push("active"),(n<i||n>o)&&k.push("disabled"),m+='<span class="'+k.join(" ")+'">'+n+"</span>",n+=1;N.html(m)},updateNavArrows:function(){if(!this._allow_update)return;var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(e){e.preventDefault();var n=$(e.target).closest("span, td, th"),r,i,s;if(n.length===1)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var o=v.modes[this.viewMode].navStep*(n[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,o),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,o),this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var u=new Date;u=t(u.getFullYear(),u.getMonth(),u.getDate(),0,0,0),this.showMode(-2);var a=this.o.todayBtn==="linked"?null:"view";this._setDate(u,a);break;case"clear":this.clearDates()}break;case"span":n.hasClass("disabled")||(this.viewDate.setUTCDate(1),n.hasClass("month")?(s=1,i=n.parent().find("span").index(n),r=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(i),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(t(r,i,s))):(s=1,i=0,r=parseInt(n.text(),10)||0,this.viewDate.setUTCFullYear(r),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(t(r,i,s))),this.showMode(-1),this.fill());break;case"td":n.hasClass("day")&&!n.hasClass("disabled")&&(s=parseInt(n.text(),10)||1,r=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),n.hasClass("old")?i===0?(i=11,r-=1):i-=1:n.hasClass("new")&&(i===11?(i=0,r+=1):i+=1),this._setDate(t(r,i,s)))}this.picker.is(":visible")&&this._focused_from&&$(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);e||this.dates.clear(),t!==-1?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):this.o.multidate===!1?(this.dates.clear(),this.dates.push(e)):this.dates.push(e);if(typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(e,t){(!t||t==="date")&&this._toggle_multidate(e&&new Date(e));if(!t||t==="view")this.viewDate=e&&new Date(e);this.fill(),this.setValue(),(!t||t!=="view")&&this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),this.o.autoclose&&(!t||t==="date")&&this.hide()},moveMonth:function(e,t){if(!e)return undefined;if(!t)return e;var n=new Date(e.valueOf()),r=n.getUTCDate(),i=n.getUTCMonth(),s=Math.abs(t),o,u;t=t>0?1:-1;if(s===1){u=t===-1?function(){return n.getUTCMonth()===i}:function(){return n.getUTCMonth()!==o},o=i+t,n.setUTCMonth(o);if(o<0||o>11)o=(o+12)%12}else{for(var a=0;a<s;a++)n=this.moveMonth(n,t);o=n.getUTCMonth(),n.setUTCDate(r),u=function(){return o!==n.getUTCMonth()}}while(u())n.setUTCDate(--r),n.setUTCMonth(o);return n},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(!this.picker.is(":visible")){e.keyCode===27&&this.show();return}var t=!1,r,i,s,o=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;r=e.keyCode===37?-1:1,e.ctrlKey?(i=this.moveYear(this.dates.get(-1)||n(),r),s=this.moveYear(o,r),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.dates.get(-1)||n(),r),s=this.moveMonth(o,r),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||n()),i.setUTCDate(i.getUTCDate()+r),s=new Date(o),s.setUTCDate(o.getUTCDate()+r)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;r=e.keyCode===38?-1:1,e.ctrlKey?(i=this.moveYear(this.dates.get(-1)||n(),r),s=this.moveYear(o,r),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.dates.get(-1)||n(),r),s=this.moveMonth(o,r),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||n()),i.setUTCDate(i.getUTCDate()+r*7),s=new Date(o),s.setUTCDate(o.getUTCDate()+r*7)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:o=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(o),t=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),typeof e.stopPropagation=="function"?e.stopPropagation():e.cancelBubble=!0,this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(t){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.children("div").hide().filter(".datepicker-"+v.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var u=function(e,t){this.element=$(e),this.inputs=$.map(t.inputs,function(e){return e.jquery?e[0]:e}),delete t.inputs,c.call($(this.inputs),t).bind("changeDate",$.proxy(this.dateUpdated,this)),this.pickers=$.map(this.inputs,function(e){return $(e).data("datepicker")}),this.updateDates()};u.prototype={updateDates:function(){this.dates=$.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=$.map(this.dates,function(e){return e.valueOf()});$.each(this.pickers,function(t,n){n.setRange(e)})},dateUpdated:function(e){if(this.updating)return;this.updating=!0;var t=$(e.target).data("datepicker"),n=t.getUTCDate(),r=$.inArray(e.target,this.inputs),i=r-1,s=r+1,o=this.inputs.length;if(r===-1)return;$.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(n)});if(n<this.dates[i])while(i>=0&&n<this.dates[i])this.pickers[i--].setUTCDate(n);else if(n>this.dates[s])while(s<o&&n>this.dates[s])this.pickers[s++].setUTCDate(n);this.updateDates(),delete this.updating},remove:function(){$.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var l=$.fn.datepicker,c=function(e){var t=Array.apply(null,arguments);t.shift();var n;return this.each(function(){var r=$(this),i=r.data("datepicker"),s=typeof e=="object"&&e;if(!i){var l=a(this,"date"),c=$.extend({},h,l,s),p=f(c.language),d=$.extend({},h,p,l,s);if(r.hasClass("biz-range")||d.inputs){var v={inputs:d.inputs||r.find("input").toArray()};r.data("datepicker",i=new u(this,$.extend(d,v)))}else r.data("datepicker",i=new o(this,d))}if(typeof e=="string"&&typeof i[e]=="function"){n=i[e].apply(i,t);if(n!==undefined)return!1}}),n!==undefined?n:this};$.fn.datepicker=c;var h=$.fn.datepicker.defaults={autoclose:!1,beforeShowDay:$.noop,beforeShowMonth:$.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,container:"body"},p=$.fn.datepicker.locale_opts=["format","rtl","weekStart"];$.fn.datepicker.Constructor=o;var d=$.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},v={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,v.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||n.length===0)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(e,n,r){function y(){var e=this.slice(0,s[f].length),t=s[f].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(!e)return undefined;if(e instanceof Date)return e;typeof n=="string"&&(n=v.parseFormat(n));var i=/([\-+]\d+)([dmwy])/,s=e.match(/([\-+]\d+)([dmwy])/g),u,a,f;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)){e=new Date;for(f=0;f<s.length;f++){u=i.exec(s[f]),a=parseInt(u[1]);switch(u[2]){case"d":e.setUTCDate(e.getUTCDate()+a);break;case"m":e=o.prototype.moveMonth.call(o.prototype,e,a);break;case"w":e.setUTCDate(e.getUTCDate()+a*7);break;case"y":e=o.prototype.moveYear.call(o.prototype,e,a)}}return t(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0)}s=e&&e.match(this.nonpunctuation)||[],e=new Date;var l={},c=["yyyy","yy","M","MM","m","mm","d","dd"],h={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;t-=1;while(t<0)t+=12;t%=12,e.setUTCMonth(t);while(e.getUTCMonth()!==t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},p,m;h.M=h.MM=h.mm=h.m,h.dd=h.d,e=t(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);var g=n.parts.slice();s.length!==g.length&&(g=$(g).filter(function(e,t){return $.inArray(t,c)!==-1}).toArray());if(s.length===g.length){var b;for(f=0,b=g.length;f<b;f++){p=parseInt(s[f],10),u=g[f];if(isNaN(p))switch(u){case"MM":m=$(d[r].months).filter(y),p=$.inArray(m[0],d[r].months)+1;break;case"M":m=$(d[r].monthsShort).filter(y),p=$.inArray(m[0],d[r].monthsShort)+1}l[u]=p}var w,E;for(f=0;f<c.length;f++)E=c[f],E in l&&!isNaN(l[E])&&(w=new Date(e),h[E](w,l[E]),isNaN(w)||(e=w))}return e},formatDate:function(e,t,n){if(!e)return"";typeof t=="string"&&(t=v.parseFormat(t));var r={d:e.getUTCDate(),D:d[n].daysShort[e.getUTCDay()],DD:d[n].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:d[n].monthsShort[e.getUTCMonth()],MM:d[n].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,e=[];var i=$.extend([],t.separators);for(var s=0,o=t.parts.length;s<=o;s++)i.length&&e.push(i.shift()),e.push(r[t.parts[s]]);return e.join("")},headTemplate:'<thead><tr><th class="prev">◀</th><th colspan="5" class="datepicker-switch"></th><th class="next">▶</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};return v.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table>"+"</div>"+"</div>",$.fn.datepicker.DPGlobal=v,$.fn.datepicker.noConflict=function(){return $.fn.datepicker=l,this},$.fn.datepicker.version="1.4.0",$.fn.datepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今日",clear:"清空",weekStart:1,format:"yyyy年mm月dd日"},$.fn.datepicker.dates.en={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",weekStart:1,format:"dd/mm/yyyy"},$(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var t=$(this);if(t.data("datepicker"))return;e.preventDefault(),c.call(t,"show")}),$(function(){c.call($('[data-provide="datepicker-inline"]'))}),c}),n("ui/Calendar",["require","dep/jquery.datepicker"],function(e){function n(e,n){i(e)?(this.date=new bizui.Input($(e)),$(this.date.main).addClass(r).attr("maxlength",10)):(this.range=$(e).find(":text"),this.startDate=new bizui.Input(this.range[0]),$(this.startDate.main).addClass(r).attr("maxlength",10),this.endDate=new bizui.Input(this.range[1]),$(this.endDate.main).addClass(r).attr("maxlength",10)),n=$.extend({},n||{}),this.instance=t.call($(e),{autoclose:!0,format:"yyyy-mm-dd",language:n.language||"zh-CN",orientation:"top left",weekStart:1,todayHighlight:n.todayHighlight,todayBtn:n.todayBtn,startDate:n.startDate,endDate:n.endDate});var s=this;n.onChange&&this.instance.on("changeDate",function(e){n.onChange.call(s,e)})}function i(e){return e.nodeType===1&&e.tagName.toLowerCase()==="input"&&e.getAttribute("type").toLowerCase()==="text"}var t=e("dep/jquery.datepicker"),r="biz-calendar";n.prototype={getDate:function(){return this.range?[$(this.range[0]).datepicker("getDate"),$(this.range[1]).datepicker("getDate")]:this.instance.datepicker("getDate")},setDate:function(e){this.range?($(this.range[0]).datepicker("setDate",e[0]),$(this.range[1]).datepicker("setDate",e[1])):this.instance.datepicker("setDate",e)},destroy:function(){this.date?this.date.destroy():(this.startDate.destroy(),this.endDate.destroy()),this.instance.remove()}};var s="bizCalendar";return $.extend($.fn,{bizCalendar:function(e,t){var r;switch(e){case"getDate":return this.data(s).getDate();case"setDate":this.each(function(){r=$(this).data(s),r&&r.setDate(t)});break;case"destroy":this.each(function(){r=$(this).data(s),r&&(r.destroy(),$(this).data(s,null))});break;default:this.each(function(){$(this).data(s)||$(this).data(s,new n(this,e))})}return this}}),n}),function r(e,n,i){function s(u,a){if(!n[u]){if(!e[u]){var f=typeof t=="function"&&t;if(!a&&f)return f(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[u]={exports:{}};e[u][0].call(c.exports,function(t){var n=e[u][1][t];return s(n?n:t)},c,c.exports,r,e,n,i)}return n[u].exports}var o=typeof t=="function"&&t;for(var u=0;u<i.length;u++)s(i[u]);return s}({1:[function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}var i=e("./class"),s=r(i),o=e("./constants");$.fn.resizableColumns=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.each(function(){var t=$(this),r=t.data(o.DATA_API);if(!r)r=new s["default"](t,e),t.data(o.DATA_API,r);else if(typeof e=="string")return r[e].apply(r,n)})},$.resizableColumns=s["default"]},{"./class":2,"./constants":3}],2:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./constants"),o=function(){function e(t,n){i(this,e),this.ns=".rc"+this.count++,this.options=$.extend({},e.defaults,n),this.$window=$(window),this.$ownerDocument=$(t[0].ownerDocument),this.$table=t,this.refreshHeaders(),this.restoreColumnWidths(),this.syncHandleWidths(),this.bindEvents(this.$window,"resize",this.syncHandleWidths.bind(this)),this.options.start&&this.bindEvents(this.$table,s.EVENT_RESIZE_START,this.options.start),this.options.resize&&this.bindEvents(this.$table,s.EVENT_RESIZE,this.options.resize),this.options.stop&&this.bindEvents(this.$table,s.EVENT_RESIZE_STOP,this.options.stop)}return r(e,[{key:"refreshHeaders",value:function(){var t=this.options.selector;typeof t=="function"&&(t=t.call(this,this.$table)),this.$tableHeaders=this.$table.find(t),this.assignPercentageWidths(),this.createHandles()}},{key:"createHandles",value:function(){var t=this,n=this.$handleContainer;n!=null&&n.remove(),this.$handleContainer=$("<div class='"+s.CLASS_HANDLE_CONTAINER+"' />"),this.$table.before(this.$handleContainer),this.$tableHeaders.each(function(e,n){var r=t.$tableHeaders.eq(e),i=t.$tableHeaders.eq(e+1);if(i.length===0||r.is(s.SELECTOR_UNRESIZABLE)||i.is(s.SELECTOR_UNRESIZABLE))return;var o=$("<div class='"+s.CLASS_HANDLE+"' />").data(s.DATA_TH,$(n)).appendTo(t.$handleContainer)}),this.bindEvents(this.$handleContainer,["mousedown","touchstart"],"."+s.CLASS_HANDLE,this.onPointerDown.bind(this))}},{key:"assignPercentageWidths",value:function(){var t=this;this.$tableHeaders.each(function(e,n){var r=$(n);t.setWidth(r[0],r.outerWidth()/t.$table.width()*100)})}},{key:"syncHandleWidths",value:function(){var t=this,n=this.$handleContainer;n.width(this.$table.width()),n.find("."+s.CLASS_HANDLE).each(function(e,n){var r=$(n),i=t.options.resizeFromBody?t.$table.height():t.$table.find("thead").height(),o=r.data(s.DATA_TH).outerWidth()+(r.data(s.DATA_TH).offset().left-t.$handleContainer.offset().left);r.css({left:o,height:i})})}},{key:"saveColumnWidths",value:function(){var t=this;this.$tableHeaders.each(function(e,n){var r=$(n);t.options.store&&!r.is(s.SELECTOR_UNRESIZABLE)&&t.options.store.set(t.generateColumnId(r),t.parseWidth(n))})}},{key:"restoreColumnWidths",value:function(){var t=this;this.$tableHeaders.each(function(e,n){var r=$(n);if(t.options.store&&!r.is(s.SELECTOR_UNRESIZABLE)){var i=t.options.store.get(t.generateColumnId(r));i!=null&&t.setWidth(n,i)}})}},{key:"onPointerDown",value:function(t){if(t.which!==1)return;this.operation&&this.onPointerUp(t);var n=$(t.currentTarget);if(n.is(s.SELECTOR_UNRESIZABLE))return;var r=n.index(),i=this.$tableHeaders.eq(r).not(s.SELECTOR_UNRESIZABLE),o=this.$tableHeaders.eq(r+1).not(s.SELECTOR_UNRESIZABLE),u=this.parseWidth(i[0]),a=this.parseWidth(o[0]);this.operation={$leftColumn:i,$rightColumn:o,$currentGrip:n,startX:this.getPointerX(t),widths:{left:u,right:a},newWidths:{left:u,right:a}},this.bindEvents(this.$ownerDocument,["mousemove","touchmove"],this.onPointerMove.bind(this)),this.bindEvents(this.$ownerDocument,["mouseup","touchend"],this.onPointerUp.bind(this)),this.$handleContainer.add(this.$table).addClass(s.CLASS_TABLE_RESIZING),i.add(o).add(n).addClass(s.CLASS_COLUMN_RESIZING),this.triggerEvent(s.EVENT_RESIZE_START,[i,o,u,a],t),t.preventDefault()}},{key:"onPointerMove",value:function(t){var n=this.operation;if(!this.operation)return;var r=(this.getPointerX(t)-n.startX)/this.$table.width()*100;if(r===0)return;var i=n.$leftColumn[0],o=n.$rightColumn[0],u=undefined,a=undefined;return r>0?(u=this.constrainWidth(n.widths.left+(n.widths.right-n.newWidths.right)),a=this.constrainWidth(n.widths.right-r)):r<0&&(u=this.constrainWidth(n.widths.left+r),a=this.constrainWidth(n.widths.right+(n.widths.left-n.newWidths.left))),i&&this.setWidth(i,u),o&&this.setWidth(o,a),n.newWidths.left=u,n.newWidths.right=a,this.triggerEvent(s.EVENT_RESIZE,[n.$leftColumn,n.$rightColumn,u,a],t)}},{key:"onPointerUp",value:function(t){var n=this.operation;if(!this.operation)return;return this.unbindEvents(this.$ownerDocument,["mouseup","touchend","mousemove","touchmove"]),this.$handleContainer.add(this.$table).removeClass(s.CLASS_TABLE_RESIZING),n.$leftColumn.add(n.$rightColumn).add(n.$currentGrip).removeClass(s.CLASS_COLUMN_RESIZING),this.syncHandleWidths(),this.saveColumnWidths(),this.operation=null,this.triggerEvent(s.EVENT_RESIZE_STOP,[n.$leftColumn,n.$rightColumn,n.newWidths.left,n.newWidths.right],t)}},{key:"destroy",value:function(){var t=this.$table,n=this.$handleContainer.find("."+s.CLASS_HANDLE);return this.unbindEvents(this.$window.add(this.$ownerDocument).add(this.$table).add(n)),n.removeData(s.DATA_TH),t.removeData(s.DATA_API),this.$handleContainer.remove(),this.$handleContainer=null,this.$tableHeaders=null,this.$table=null,t}},{key:"bindEvents",value:function(t,n,r,i){typeof n=="string"?n+=this.ns:n=n.join(this.ns+" ")+this.ns,arguments.length>3?t.on(n,r,i):t.on(n,r)}},{key:"unbindEvents",value:function(t,n){typeof n=="string"?n+=this.ns:n!=null?n=n.join(this.ns+" ")+this.ns:n=this.ns,t.off(n)}},{key:"triggerEvent",value:function(t,n,r){var i=$.Event(t);return i.originalEvent&&(i.originalEvent=$.extend({},r)),this.$table.trigger(i,[this].concat(n||[]))}},{key:"generateColumnId",value:function(t){return this.$table.data(s.DATA_COLUMNS_ID)+"-"+t.data(s.DATA_COLUMN_ID)}},{key:"parseWidth",value:function(t){return t?parseFloat(t.style.width.replace("%","")):0}},{key:"setWidth",value:function(t,n){n=n.toFixed(2),n=n>0?n:0,t.style.width=n+"%"}},{key:"constrainWidth",value:function(t){return this.options.minWidth!=undefined&&(t=Math.max(this.options.minWidth,t)),this.options.maxWidth!=undefined&&(t=Math.min(this.options.maxWidth,t)),t}},{key:"getPointerX",value:function(t){return t.type.indexOf("touch")===0?(t.originalEvent.touches[0]||t.originalEvent.changedTouches[0]).pageX:t.pageX}}]),e}();n["default"]=o,o.defaults={selector:function(t){return t.find("thead").length?s.SELECTOR_TH:s.SELECTOR_TD},store:window.store,syncHandlers:!0,resizeFromBody:!0,maxWidth:null,minWidth:.01},o.count=0,t.exports=n["default"]},{"./constants":3}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="resizableColumns";n.DATA_API=r;var i="resizable-columns-id";n.DATA_COLUMNS_ID=i;var s="resizable-column-id";n.DATA_COLUMN_ID=s;var o="th";n.DATA_TH=o;var u="rc-table-resizing";n.CLASS_TABLE_RESIZING=u;var a="rc-column-resizing";n.CLASS_COLUMN_RESIZING=a;var f="rc-handle";n.CLASS_HANDLE=f;var l="rc-handle-container";n.CLASS_HANDLE_CONTAINER=l;var c="column:resize:start";n.EVENT_RESIZE_START=c;var h="column:resize";n.EVENT_RESIZE=h;var p="column:resize:stop";n.EVENT_RESIZE_STOP=p;var d="tr:first > th:visible";n.SELECTOR_TH=d;var v="tr:first > td:visible";n.SELECTOR_TD=v;var m="[data-noresize]";n.SELECTOR_UNRESIZABLE=m},{}],4:[function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./class"),s=r(i),o=e("./adapter"),u=r(o);n["default"]=s["default"],t.exports=n["default"]},{"./adapter":1,"./class":2}]},{},[4]),n("dep/jquery.resizableColumns",function(){}),n("dep/jquery.editabletable",["require"],function(e){$.fn.editableTableWidget=function(e){return $(this).each(function(){var t=function(){var e=$.extend({},$.fn.editableTableWidget.defaultOptions);return e.editor=e.editor.clone(),e},n=$.extend(t(),e),r=37,i=38,s=39,o=40,u=13,a=27,f=9,l=$(this),c=n.editor.css("position","absolute").hide().appendTo(l.parent()),h,p=function(e){h=l.find("td:focus"),h.length&&(c.val(h.text()).removeClass("error").show().offset(h.offset()).css(h.css(n.cloneProperties)).width(h.width()).height(h.height()).focus(),e&&c.select())},d=function(){var e=$.trim(c.val()),t=$.Event("change"),n;if(h.text()===e||c.hasClass("error"))return!0;n=h.html(),h.text(e).trigger(t,e),t.result===!1&&h.html(n)},v=function(e,t){return t===s?e.next("td"):t===r?e.prev("td"):t===i?e.parent().prev().children().eq(e.index()):t===o?e.parent().next().children().eq(e.index()):[]};c.blur(function(){d(),c.hide()}).keydown(function(e){if(e.which===u)d(),c.hide(),h.focus(),e.preventDefault(),e.stopPropagation();else if(e.which===a)c.val(h.text()),e.preventDefault(),e.stopPropagation(),c.hide(),h.focus();else if(e.which===f)h.focus();else if(this.selectionEnd-this.selectionStart===this.value.length){var t=v(h,e.which);t.length>0&&(t.focus(),e.preventDefault(),e.stopPropagation())}}).on("input paste",function(){var e=$.Event("validate");h.trigger(e,$.trim(c.val())),e.result===!1?c.addClass("error"):c.removeClass("error")}),l.on("click.bizTableEdit","td[editable]",p),l.find("td").prop("tabindex",1),$(window).on("resize",function(){c.is(":visible")&&c.offset(h.offset()).width(h.width()).height(h.height())})})},$.fn.editableTableWidget.defaultOptions={cloneProperties:["padding","padding-top","padding-bottom","padding-left","padding-right","text-align","font","font-size","font-family","font-weight"],editor:$('<input class="biz-table-editor">')}}),n("ui/Table",["require","dep/jquery.resizableColumns","dep/jquery.editabletable"],function(e){function t(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}if(!i(e))return;this.main=e,this.$main=$(this.main);var n={selectable:!1,resizable:!1};this.options=$.extend({},t||{}),this.init(this.options)}function i(e){return e.nodeType===1&&e.tagName.toLowerCase()==="table"}e("dep/jquery.resizableColumns"),e("dep/jquery.editabletable");var n="biz-table",r="biz-table-checkbox-";t.prototype={init:function(e){this.$main.addClass(n),e.selectable&&(this.createSelect(),this.rowCount=this.$main.find("td :checkbox:enabled").length,this.bindSelect()),e.onSort&&this.bindSort(),e.resizable&&this.$main.resizableColumns(),this.$main.editableTableWidget(),e.onChange&&this.bindEdit()},createSelect:function(){this.$main.find("tr").each(function(e,t){var n=r+(t.id?t.id:e),i=$(t).attr("unselectable")!==undefined?" disabled":"";$(t).prepend(e===0?'<th width="20"></th>':'<td style="text-align:center"></td>').children(":first-child").html('<input type="checkbox" title=" " id="'+n+'"'+i+" />")}),this.$main.find(":checkbox").bizCheckbox()},bindSelect:function(){var e=this;this.$main.on("click.bizTableSelectAll","th .biz-label",function(t){var n=$(t.target).hasClass("biz-checkbox-checked"),r=e.$main.find("td :checkbox:enabled"),i=e.$main.find("tr").not("[unselectable]");n?(r.bizCheckbox("check"),i.addClass("selected")):(r.bizCheckbox("uncheck"),i.removeClass("selected"))}).on("click.bizTableSelectOne","td .biz-label",function(t){var n=$(t.target).hasClass("biz-checkbox-checked"),r=e.$main.find("td .biz-checkbox-checked").length,i=e.$main.find("th :checkbox"),s=$(t.target).parent().parent();r===e.rowCount?i.bizCheckbox("check"):i.bizCheckbox("uncheck"),n?s.addClass("selected"):s.removeClass("selected")})},bindSort:function(){var e=this;this.$main.on("click.bizTableSort","th[sortable]",function(t){var n=$(t.currentTarget);n.attr("des")!==undefined?n.removeAttr("des").attr("asc",""):n.attr("asc")!==undefined?n.removeAttr("asc").attr("des",""):(n.parent().children("th").removeAttr("des").removeAttr("asc"),n.attr("des","")),e.options.onSort.call(e,{field:n.attr("field"),des:n.attr("des")!==undefined,asc:n.attr("asc")!==undefined},t)})},bindEdit:function(){var e=this;this.$main.find("td[editable]").on("validate",function(t,n){if(e.options.changePattern&&!e.options.changePattern.test(n))return!1}),this.$main.find("td[editable]").on("change",function(t,n){e.options.onChange.call(e,n,t)})},refresh:function(){this.options.selectable&&(this.createSelect(),this.rowCount=this.$main.find("td :checkbox:enabled").length),this.options.resizable&&(this.$main.resizableColumns("destroy"),this.$main.resizableColumns()),this.$main.find("td").prop("tabindex",1),this.options.onChange&&this.bindEdit()},getSelected:function(){return $.map(this.$main.find("td :checked"),function(e,t){return e.id.replace(r,"")}).join(",")},destroy:function(){this.$main.removeClass(n),this.$main.find(":checkbox").bizCheckbox("destroy"),this.$main.find("td[editable]").off(),this.$main.find("td").removeAttr("tabindex"),this.$main.off("click.bizTableSelectAll").off("click.bizTableSelectOne").off("click.bizTableSort").off("click.bizTableEdit"),this.$main.resizableColumns("destroy"),$(".biz-table-editor").off().remove()}};var s="bizTable";return $.extend($.fn,{bizTable:function(e,n){var r;switch(e){case"getSelected":return $(this).data(s).getSelected();case"destroy":this.each(function(){r=$(this).data(s),r&&(r.destroy(),$(this).data(s,null))});break;case"refresh":this.each(function(){r=$(this).data(s),r&&r.refresh()});break;default:this.each(function(){!$(this).data(s)&&i(this)&&$(this).data(s,new t(this,e))})}return this}}),t}),n("bizui",["require","ui/Button","ui/Input","ui/Textarea","ui/Textline","ui/Radio","ui/Checkbox","ui/Select","ui/Dialog","ui/Panel","ui/Tooltip","ui/Tab","ui/Page","ui/Tree","ui/Calendar","ui/Table"],function(e){var t={};t.version="1.0.2";var n=window.bizui;return t.noConflict=function(){return window.bizui=n,this},$.extend(t,{Button:e("ui/Button"),Input:e("ui/Input"),Textarea:e("ui/Textarea"),Textline:e("ui/Textline"),Radio:e("ui/Radio"),Checkbox:e("ui/Checkbox"),Select:e("ui/Select"),Dialog:e("ui/Dialog"),Panel:e("ui/Panel"),Tooltip:e("ui/Tooltip"),Tab:e("ui/Tab"),Page:e("ui/Page"),Tree:e("ui/Tree"),Calendar:e("ui/Calendar"),Table:e("ui/Table")}),t}),t("bizui")});